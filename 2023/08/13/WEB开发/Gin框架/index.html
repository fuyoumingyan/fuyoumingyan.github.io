

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="fuming">
  <meta name="keywords" content="">
  
    <meta name="description" content="Go Gin 框架官方地址：https:&#x2F;&#x2F;github.com&#x2F;gin-gonic&#x2F;gin 中文API：https:&#x2F;&#x2F;gin-gonic.com&#x2F;zh-cn&#x2F;docs&#x2F; 1go get -u github.com&#x2F;gin-gonic&#x2F;gin  简单使用123456789101112131415import &quot;github.com&#x2F;gin-gonic&#x2F;gin&quot;func hel">
<meta property="og:type" content="article">
<meta property="og:title" content="Go Gin 框架">
<meta property="og:url" content="https://fuyoumingyan.github.io/2023/08/13/WEB%E5%BC%80%E5%8F%91/Gin%E6%A1%86%E6%9E%B6/index.html">
<meta property="og:site_name" content="fuyoumingyan&#39;s blog">
<meta property="og:description" content="Go Gin 框架官方地址：https:&#x2F;&#x2F;github.com&#x2F;gin-gonic&#x2F;gin 中文API：https:&#x2F;&#x2F;gin-gonic.com&#x2F;zh-cn&#x2F;docs&#x2F; 1go get -u github.com&#x2F;gin-gonic&#x2F;gin  简单使用123456789101112131415import &quot;github.com&#x2F;gin-gonic&#x2F;gin&quot;func hel">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400435.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400439.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400441.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400444.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400445.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051406989.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400472.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400410.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400075.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400237.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400958.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400871.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400880.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400449.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400599.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051406070.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400911.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051401154.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051401828.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051401381.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051401145.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051401198.jpg">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051406755.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051401285.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051401668.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051401756.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051401645.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051401860.png">
<meta property="og:image" content="d:\my-documents\%E7%AC%94%E8%AE%B0\golang-notes\WEB%E5%BC%80%E5%8F%91\Gin%E6%A1%86%E6%9E%B6\Gin.assets\image-20230403160516625.png">
<meta property="og:image" content="d:\my-documents\%E7%AC%94%E8%AE%B0\golang-notes\WEB%E5%BC%80%E5%8F%91\Gin%E6%A1%86%E6%9E%B6\Gin.assets\image-20230403160538967.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402450.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402679.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402268.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402175.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402257.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402452.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402537.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402204.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402784.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402381.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402715.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402270.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403375.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403707.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403374.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051407830.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403385.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403051.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403722.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403161.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403879.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403729.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403319.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403506.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403611.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403253.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403829.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403429.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403634.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403731.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403353.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403795.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403897.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403996.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403018.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403218.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403289.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403785.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403924.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403312.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403448.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404476.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404017.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404530.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404540.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404445.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404739.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404182.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404152.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404047.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404257.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404800.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404050.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404016.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404171.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404905.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404360.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404450.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404540.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404721.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404028.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404442.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404254.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404394.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404062.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404523.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405500.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405225.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405073.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405105.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405400.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405412.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405172.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405502.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405568.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405669.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405050.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405085.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405843.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405934.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405295.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405685.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405423.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405550.png">
<meta property="og:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405249.png">
<meta property="article:published_time" content="2023-08-13T10:00:25.000Z">
<meta property="article:modified_time" content="2023-09-05T06:10:10.789Z">
<meta property="article:author" content="fuming">
<meta property="article:tag" content="Golang">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400435.png">
  
  
  
  <title>Go Gin 框架 - fuyoumingyan&#39;s blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"fuyoumingyan.github.io","root":"/","version":"1.9.4","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>fuyoumingyan&#39;s blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Go Gin 框架"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-08-13 18:00" pubdate>
          2023年8月13日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          37k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          205 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Go Gin 框架</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="Go-Gin-框架"><a href="#Go-Gin-框架" class="headerlink" title="Go Gin 框架"></a>Go Gin 框架</h1><p>官方地址：<a target="_blank" rel="noopener" href="https://github.com/gin-gonic/gin">https://github.com/gin-gonic/gin</a></p>
<p>中文API：<a target="_blank" rel="noopener" href="https://gin-gonic.com/zh-cn/docs/">https://gin-gonic.com/zh-cn/docs/</a></p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">go</span> <span class="hljs-built_in">get</span> -<span class="hljs-keyword">u</span> github.<span class="hljs-keyword">com</span>/gin-gonic/gin<br></code></pre></td></tr></table></figure>

<h2 id="简单使用"><a href="#简单使用" class="headerlink" title="简单使用"></a>简单使用</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">hello</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	<span class="hljs-comment">// gin.Context - 把请求和响应都封装到gin.Context上下文环境中</span><br>	context.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;hello gin !&quot;</span>)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	<span class="hljs-comment">// 获取引擎</span><br>	r := gin.Default()<br>	<span class="hljs-comment">// 路由 GET方法请求&quot;/&quot;路径，执行func(...)函数，这里也可以使用匿名函数</span><br>	r.GET(<span class="hljs-string">&quot;/&quot;</span>, hello)<br>	<span class="hljs-comment">// 启动引擎</span><br>	r.Run()<br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>Default()</code> 底层调用了<code>New()</code>，相当于<code>New()</code>的升级，<code>New()</code>返回的是一个引擎。</p>
<p><code>Default()</code>在此基础上多增加了两个中间件<code>Logger(), Recovery()</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Default</span><span class="hljs-params">()</span></span> *Engine &#123;<br>	debugPrintWARNINGDefault()<br>	engine := New()<br>    <span class="hljs-comment">// 使用中间件 日志,错误处理</span><br>	engine.Use(Logger(), Recovery())<br>	<span class="hljs-keyword">return</span> engine<br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>Default()</code>返回的是一个引擎 <code>Engine</code>，它是框架非常重要的数据结构，是框架的入口。</p>
<p><code>r.Run(ip:port) =&gt; r.Run(127.0.0.1:80) =&gt; r.Run(:80)</code> 默认为 8080 端口</p>
<h2 id="文件交互"><a href="#文件交互" class="headerlink" title="文件交互"></a>文件交互</h2><p>模板文件：HTML</p>
<p>静态文件：CSS、JS、图片…</p>
<h3 id="模板文件"><a href="#模板文件" class="headerlink" title="模板文件"></a>模板文件</h3><p>使用 HTML 模板文件：</p>
<ol>
<li>先引入模板文件</li>
<li>再渲染模板文件（ 相对路径 ）</li>
</ol>
<h4 id="引入HTML模板文件"><a href="#引入HTML模板文件" class="headerlink" title="引入HTML模板文件"></a>引入HTML模板文件</h4><ul>
<li>指定的HTML文件：<code>LoadHTMLFiles(files ...string)</code></li>
<li>指定文件夹下的所有HTML文件：<code>LoadHTMLGlob(pattern string)</code></li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go">r.LoadHTMLFiles(<span class="hljs-string">&quot;templates/hello1.html&quot;</span>, <span class="hljs-string">&quot;templates/hello2.html&quot;</span>)	<span class="hljs-comment">// 不推荐</span><br>r.LoadHTMLGlob(<span class="hljs-string">&quot;templates/*&quot;</span>)	<span class="hljs-comment">// 推荐</span><br></code></pre></td></tr></table></figure>

<h4 id="渲染HTML模板文件"><a href="#渲染HTML模板文件" class="headerlink" title="渲染HTML模板文件"></a>渲染HTML模板文件</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Context)</span></span> HTML(code <span class="hljs-type">int</span>, name <span class="hljs-type">string</span>, obj any)<br></code></pre></td></tr></table></figure>

<ul>
<li>code：状态码</li>
<li>name：HTML文件名</li>
<li>obj：传入参数，空接口可以接受任意类型，没有的话为 nil</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">hello</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	context.HTML(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;hello1.html&quot;</span>, <span class="hljs-literal">nil</span>)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	r := gin.Default()<br>	r.LoadHTMLGlob(<span class="hljs-string">&quot;templates/*&quot;</span>)<br>	r.GET(<span class="hljs-string">&quot;/hello1&quot;</span>, hello)<br>	r.Run()<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="多级目录"><a href="#多级目录" class="headerlink" title="多级目录"></a>多级目录</h4><p>当HTML文件位于多个不同的子目录时，需要如下修改，才能正常引入：</p>
<ol>
<li><code>LoadHTMLGlob</code> 指定多级目录通配符</li>
<li><code>context.HTML</code> 指定路径（ 除第一级目录不指定 ）</li>
<li>在对应的HTML文件中，<code>define</code> 路径文件名</li>
</ol>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400435.png" srcset="/img/loading.gif" lazyload alt="image-20230401211928220"></p>
<ol>
<li>有几级目录，得在通配符上指明，<code>/**/</code> 表示任意子目录</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go">r.LoadHTMLGlob(<span class="hljs-string">&quot;templates/**/*&quot;</span>)<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>指定html文件，除了第一级的templates路径不需要指定，后面的路径都要指定</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go">context.HTML(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;dome1/hello1.html&quot;</span>, <span class="hljs-literal">nil</span>)<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>在HTML中，定义 <code>define</code> 和 <code>end</code> ：</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html">&#123;&#123;define &quot;dome1/hello1.html&quot;&#125;&#125;<br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>....<br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br>&#123;&#123;end&#125;&#125;<br></code></pre></td></tr></table></figure>



<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">hello1</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	context.HTML(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;dome1/hello1.html&quot;</span>, <span class="hljs-literal">nil</span>)<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">hello2</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	context.HTML(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;dome2/hello2.html&quot;</span>, <span class="hljs-literal">nil</span>)<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	r := gin.Default()<br>	r.LoadHTMLGlob(<span class="hljs-string">&quot;templates/**/*&quot;</span>)<br>	r.GET(<span class="hljs-string">&quot;/hello1&quot;</span>, hello1)<br>	r.GET(<span class="hljs-string">&quot;/hello2&quot;</span>, hello2)<br>	r.Run()<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400439.png" srcset="/img/loading.gif" lazyload alt="image-20230401213107590"></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400441.png" srcset="/img/loading.gif" lazyload alt="image-20230401213122019"></p>
<h3 id="静态文件"><a href="#静态文件" class="headerlink" title="静态文件"></a>静态文件</h3><p>静态文件：CSS，JS，图片…</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400444.png" srcset="/img/loading.gif" lazyload alt="image-20230401214559997"></p>
<p>如何使用？</p>
<ol>
<li>先指定静态文件路径（ 设置对应目录 ）</li>
<li>在前端页面引入静态文件</li>
</ol>
<h4 id="指定静态文件路径"><a href="#指定静态文件路径" class="headerlink" title="指定静态文件路径"></a>指定静态文件路径</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go">r.Static(<span class="hljs-string">&quot;/s&quot;</span>, <span class="hljs-string">&quot;static&quot;</span>)	<span class="hljs-comment">// 将static这个文件夹映射到s上</span><br></code></pre></td></tr></table></figure>

<ul>
<li>第一个参数：相对路径</li>
<li>第二个参数：文件夹名称</li>
<li>含义：这个相对路径映射到哪个文件夹上去</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go">r.StaticFS(<span class="hljs-string">&quot;/s&quot;</span>, http.Dir(<span class="hljs-string">&quot;static&quot;</span>))<br></code></pre></td></tr></table></figure>

<h4 id="引入静态文件"><a href="#引入静态文件" class="headerlink" title="引入静态文件"></a>引入静态文件</h4><p>css 文件位置：static&#x2F;css&#x2F;mycss.css</p>
<p>上面设置了<code>/s</code>表示<code>static</code>，所以这里是<code>/s/css/mycss.css</code></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400445.png" srcset="/img/loading.gif" lazyload alt="image-20230401215618823"></p>
<h2 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h2><p>一个项目：</p>
<p>静态文件：static 目录</p>
<p>模版文件：templates 目录</p>
<p>函数：myfunc 目录 </p>
<p>路由数据交互函数：datainteraction.go </p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051406989.png" srcset="/img/loading.gif" lazyload alt="image-20230401220434543"></p>
<h2 id="数据渲染"><a href="#数据渲染" class="headerlink" title="数据渲染"></a>数据渲染</h2><p>后端的数据渲染到前端页面：</p>
<ol>
<li>context.HTML 第三个参数传入字符串</li>
<li>HTML文件中使用上下文接收</li>
</ol>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Hello</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	name := <span class="hljs-string">&quot;fuming&quot;</span><br>	context.HTML(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;dome1/hello.html&quot;</span>, name)<br>&#125;<br></code></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>My name is &#123;&#123;.&#125;&#125; !<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>



<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400472.png" srcset="/img/loading.gif" lazyload alt="image-20230403093324917"></p>
<h3 id="单个结构体"><a href="#单个结构体" class="headerlink" title="单个结构体"></a>单个结构体</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Hello</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	f := &amp;Student&#123;<br>		Name: <span class="hljs-string">&quot;fuming&quot;</span>,<br>		Age:  <span class="hljs-string">&quot;20&quot;</span>,<br>	&#125;<br>	context.HTML(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;dome1/hello.html&quot;</span>, f)<br>&#125;<br></code></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>My name is &#123;&#123;.Name&#125;&#125; .<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>My age is &#123;&#123;.Age&#125;&#125; .<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>This struct is &#123;&#123;.&#125;&#125; .<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>



<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400410.png" srcset="/img/loading.gif" lazyload alt="image-20230403093853053"></p>
<p>传入多个结构体可以借助<code>Map</code>来完成。</p>
<h3 id="数组切片"><a href="#数组切片" class="headerlink" title="数组切片"></a>数组切片</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Hello</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	numbers := []<span class="hljs-type">int</span>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;<br>	context.HTML(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;dome1/hello.html&quot;</span>, numbers)<br>&#125;<br></code></pre></td></tr></table></figure>

<p>整个：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123;.&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400075.png" srcset="/img/loading.gif" lazyload alt="image-20230403115941206"></p>
<p>值遍历：<code>&#123;&#123;.&#125;&#125;</code> 代表遍历的值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><br>    &#123;&#123;range .&#125;&#125;<br>    	&#123;&#123;.&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><br>	&#123;&#123;end&#125;&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400237.png" srcset="/img/loading.gif" lazyload alt="image-20230403120101549"></p>
<p>值遍历：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><br>    &#123;&#123;range $v := .&#125;&#125;<br>    	值: &#123;&#123;$v&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><br>	&#123;&#123;end&#125;&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400958.png" srcset="/img/loading.gif" lazyload alt="image-20230403120248434"></p>
<p>键值遍历：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><br>    &#123;&#123;range $i,$v := .&#125;&#125;<br>    	索引: &#123;&#123;$i&#125;&#125;  值: &#123;&#123;$v&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><br>	&#123;&#123;end&#125;&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400871.png" srcset="/img/loading.gif" lazyload alt="image-20230403120138955"></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400880.png" srcset="/img/loading.gif" lazyload alt="image-20230403120349693"></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400449.png" srcset="/img/loading.gif" lazyload alt="image-20230403120409422"></p>
<h3 id="结构体数组"><a href="#结构体数组" class="headerlink" title="结构体数组"></a>结构体数组</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Hello</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	s := []Student&#123;<br>		&#123;<br>			Name: <span class="hljs-string">&quot;fuming&quot;</span>,<br>			Age:  <span class="hljs-string">&quot;20&quot;</span>,<br>		&#125;,<br>		&#123;<br>			Name: <span class="hljs-string">&quot;xiaowang&quot;</span>,<br>			Age:  <span class="hljs-string">&quot;21&quot;</span>,<br>		&#125;,<br>		&#123;<br>			Name: <span class="hljs-string">&quot;xiaocai&quot;</span>,<br>			Age:  <span class="hljs-string">&quot;18&quot;</span>,<br>		&#125;,<br>	&#125;<br>	context.HTML(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;dome1/hello.html&quot;</span>, s)<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400599.png" srcset="/img/loading.gif" lazyload alt="image-20230403124308893"></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051406070.png" srcset="/img/loading.gif" lazyload alt="image-20230403124318535"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><br>        &#123;&#123;range .&#125;&#125;<br>            Name = &#123;&#123;.Name&#125;&#125;<br>            Age = &#123;&#123;.Age&#125;&#125;<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><br>        &#123;&#123;end&#125;&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><br>        &#123;&#123;range $v := .&#125;&#125;<br>            Name = &#123;&#123;$v.Name&#125;&#125;<br>            Age = &#123;&#123;$v.Age&#125;&#125;<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><br>        &#123;&#123;end&#125;&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><br>        &#123;&#123;range $i,$v := .&#125;&#125;<br>            key = &#123;&#123;$i&#125;&#125;<br>            Name = &#123;&#123;$v.Name&#125;&#125;<br>            Age = &#123;&#123;$v.Age&#125;&#125;<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><br>        &#123;&#123;end&#125;&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051400911.png" srcset="/img/loading.gif" lazyload alt="image-20230403125020132"></p>
<h3 id="映射"><a href="#映射" class="headerlink" title="映射"></a>映射</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Hello</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	age := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">int</span>)<br>	age[<span class="hljs-string">&quot;fuming&quot;</span>] = <span class="hljs-number">18</span><br>	age[<span class="hljs-string">&quot;xiaoli&quot;</span>] = <span class="hljs-number">20</span><br>	context.HTML(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;dome1/hello.html&quot;</span>, age)<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><br>        fuming = &#123;&#123;.fuming&#125;&#125;<br>        xiaoli = &#123;&#123;.xiaoli&#125;&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051401154.png" srcset="/img/loading.gif" lazyload alt="image-20230403125504803"></p>
<h3 id="多个结构体"><a href="#多个结构体" class="headerlink" title="多个结构体"></a>多个结构体</h3><p>多个结构体的渲染通过 map 来实现：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Hello</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	info := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]Student)<br>	info[<span class="hljs-string">&quot;fuming&quot;</span>] = Student&#123;<br>		Age: <span class="hljs-number">18</span>,<br>		Sex: <span class="hljs-string">&quot;男&quot;</span>,<br>	&#125;<br>	info[<span class="hljs-string">&quot;xiaocai&quot;</span>] = Student&#123;<br>		Age: <span class="hljs-number">22</span>,<br>		Sex: <span class="hljs-string">&quot;女&quot;</span>,<br>	&#125;<br>	context.HTML(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;dome1/hello.html&quot;</span>, info)<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123;.&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123;.fuming&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123;.xiaocai&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051401828.png" srcset="/img/loading.gif" lazyload alt="image-20230403130554675"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123;.fuming.Sex&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123;.xiaocai.Sex&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051401381.png" srcset="/img/loading.gif" lazyload alt="image-20230403130644051"></p>
<h2 id="HTTP请求与响应"><a href="#HTTP请求与响应" class="headerlink" title="HTTP请求与响应"></a>HTTP请求与响应</h2><p><a target="_blank" rel="noopener" href="https://www.runoob.com/http/http-tutorial.html">https://www.runoob.com/http/http-tutorial.html</a></p>
<h3 id="请求"><a href="#请求" class="headerlink" title="请求"></a>请求</h3><p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051401145.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<h3 id="响应"><a href="#响应" class="headerlink" title="响应"></a>响应</h3><p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051401198.jpg" srcset="/img/loading.gif" lazyload alt="img"></p>
<p>状态码：</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051406755.png" srcset="/img/loading.gif" lazyload alt="image-20230403152059347"></p>
<p>常见状态码：</p>
<ul>
<li><p>200 - 请求成功，已经正常处理完毕</p>
</li>
<li><p>301 - 请求永久重定向，转移到其它URL</p>
</li>
<li><p>302 - 请求临时重定向</p>
</li>
<li><p>304 - 请求被重定向到客户端本地缓存</p>
</li>
<li><p>400 - 客户端请求存在语法错误</p>
</li>
<li><p>401 - 客户端请求没有经过授权</p>
</li>
<li><p>403 - 客户端的请求被服务器拒绝，一般为客户端没有访问权限</p>
</li>
<li><p>404 - 资源未找到，客户端请求的URL在服务端不存在</p>
</li>
<li><p>500 - 服务端出现异常</p>
</li>
</ul>
<p>MIME类型：</p>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/http/mime-types.html">https://www.runoob.com/http/mime-types.html</a></p>
<p>MIME (Multipurpose Internet Mail Extensions) 是描述消息内容类型的标准，用来表示文档、文件或字节流的性质和格式。</p>
<p>MIME 消息能包含文本、图像、音频、视频以及其他应用程序专用的数据。</p>
<p>浏览器通常使用 MIME 类型（而不是文件扩展名）来确定如何处理URL，因此 Web服务器在响应头中添加正确的 MIME 类型非常重要。如果配置不正确，浏览器可能会无法解析文件内容，网站将无法正常工作，并且下载的文件也会被错误处理。</p>
<p>在服务端我们可以设置响应头中Content-Type的值来指定响应类型。</p>
<h2 id="数据交互"><a href="#数据交互" class="headerlink" title="数据交互"></a>数据交互</h2><p>前端的数据给后端</p>
<h3 id="路径中拼参数值"><a href="#路径中拼参数值" class="headerlink" title="路径中拼参数值"></a>路径中拼参数值</h3><p>路径中参数值：<a target="_blank" rel="noopener" href="http://43.139.185.135:8080/hello/%E5%8F%82%E6%95%B0">http://43.139.185.135:8080/hello/参数</a></p>
<p>在路由设置的路径那里加占位符，再通过<code>context.Param()</code>获取参数值。</p>
<p>占位符：</p>
<ul>
<li><code>:</code> &#x3D;&gt; 必须存在参数，否则404</li>
<li><code>*</code> &#x3D;&gt; 可以不存在参数，但是参数前会多个<code>/</code></li>
</ul>
<p><code>:</code> 占位符：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	r := gin.Default()<br>	r.LoadHTMLGlob(<span class="hljs-string">&quot;templates/**/*&quot;</span>)<br>	r.StaticFS(<span class="hljs-string">&quot;/s&quot;</span>, http.Dir(<span class="hljs-string">&quot;static&quot;</span>))<br>    r.GET(<span class="hljs-string">&quot;/hello/:name&quot;</span>, myfunc.Hello)		<span class="hljs-comment">// 路由后跟name(参数)</span><br>	r.Run()<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Hello</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>    <span class="hljs-comment">// 获取参数值</span><br>	name := context.Param(<span class="hljs-string">&quot;name&quot;</span>)<br>    <span class="hljs-comment">// 渲染给HTML页面</span><br>	context.HTML(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;hello/hello.html&quot;</span>, name)<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051401285.png" srcset="/img/loading.gif" lazyload alt="image-20230403154908049"></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051401668.png" srcset="/img/loading.gif" lazyload alt="image-20230403154757392"></p>
<p><code>*</code> 占位符：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go">r.GET(<span class="hljs-string">&quot;/hello/*name&quot;</span>, myfunc.Hello)<br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051401756.png" srcset="/img/loading.gif" lazyload alt="image-20230403155014255"></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051401645.png" srcset="/img/loading.gif" lazyload alt="image-20230403155104751"></p>
<h3 id="路径后键值对"><a href="#路径后键值对" class="headerlink" title="路径后键值对"></a>路径后键值对</h3><p>路径后键值对：<a target="_blank" rel="noopener" href="http://43.139.185.135:8080/hello?id=1&name=fuming">http://43.139.185.135:8080/hello?id=1&amp;name=fuming</a></p>
<p>利用 ? 的形式拼接参数的键值对，多个键值对中间用 &amp; 符号进行拼接</p>
<p>不需要对路由操作，直接通过<code>context.Query()</code>&#x2F;<code>context.DefaultQuery()</code>获取参数即可。</p>
<p><code>context.Query()</code> 获取请求参数：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Context)</span></span> Query(key <span class="hljs-type">string</span>) (value <span class="hljs-type">string</span>)<br></code></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Hello</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	name := context.Query(<span class="hljs-string">&quot;name&quot;</span>)<br>	age := context.Query(<span class="hljs-string">&quot;age&quot;</span>)<br>	context.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;name = %s \t age = %s&quot;</span>, name, age)<br>&#125;<br></code></pre></td></tr></table></figure>

<img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051401860.png" srcset="/img/loading.gif" lazyload alt="image-20230403160307817" style="zoom:67%;" />



<p><code>context.DefaultQuery()</code>：获取请求参数并设置默认值，没有参数时则使用默认值</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Context)</span></span> DefaultQuery(key <span class="hljs-type">string</span>, defaultValue <span class="hljs-type">string</span>) <span class="hljs-type">string</span><br></code></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="http://43.139.185.135:8080/hello">http://43.139.185.135:8080/hello</a></p>
<img src="D:\my-documents\笔记\golang-notes\WEB开发\Gin框架\Gin.assets\image-20230403160516625.png" srcset="/img/loading.gif" lazyload alt="image-20230403160516625" style="zoom:67%;" />

<p><a target="_blank" rel="noopener" href="http://43.139.185.135:8080/hello?name=admin&age=20">http://43.139.185.135:8080/hello?name=admin&amp;age=20</a></p>
<img src="D:\my-documents\笔记\golang-notes\WEB开发\Gin框架\Gin.assets\image-20230403160538967.png" srcset="/img/loading.gif" lazyload alt="image-20230403160538967" style="zoom:67%;" />

<h3 id="多个参数值"><a href="#多个参数值" class="headerlink" title="多个参数值"></a>多个参数值</h3><p>数组接收：<a target="_blank" rel="noopener" href="http://43.139.185.135:8080/hello?name=admin&name=fuming&name=root">http://43.139.185.135:8080/hello?name=admin&amp;name=fuming&amp;name=root</a></p>
<p>Map接收：<a target="_blank" rel="noopener" href="http://43.139.185.135:8080/hello?name%5B1%5D=admin&name%5B2%5D=fuming&name%5B3%5D=root">http://43.139.185.135:8080/hello?name[1]=admin&amp;name[2]=fuming&amp;name[3]=root</a></p>
<p>数组：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Context)</span></span> QueryArray(key <span class="hljs-type">string</span>) (values []<span class="hljs-type">string</span>)<br></code></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Hello</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	names := context.QueryArray(<span class="hljs-string">&quot;name&quot;</span>)<br>	context.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;names[1] = %s\nnames[2] = %s\nnames = %v&quot;</span>, names[<span class="hljs-number">1</span>], names[<span class="hljs-number">2</span>], names)<br>&#125;<br></code></pre></td></tr></table></figure>

<img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402450.png" srcset="/img/loading.gif" lazyload alt="image-20230403161345659" style="zoom:67%;" />





<p>Map：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Context)</span></span> QueryMap(key <span class="hljs-type">string</span>) (dicts <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>)<br></code></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Hello</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	names := context.QueryMap(<span class="hljs-string">&quot;name&quot;</span>)<br>	context.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;name = %v\tnames[1] = %s&quot;</span>, names, names[<span class="hljs-string">&quot;1&quot;</span>])<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402679.png" srcset="/img/loading.gif" lazyload alt="image-20230403161709603"></p>
<h3 id="获取POST数据-PostForm"><a href="#获取POST数据-PostForm" class="headerlink" title="获取POST数据-PostForm"></a>获取POST数据-PostForm</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	r := gin.Default()<br>	r.LoadHTMLGlob(<span class="hljs-string">&quot;templates/*&quot;</span>)<br>	r.StaticFS(<span class="hljs-string">&quot;/s&quot;</span>, http.Dir(<span class="hljs-string">&quot;static&quot;</span>))<br>    <br>	<span class="hljs-comment">// &quot;/&quot; 渲染FORM表单的HTML页面</span><br>	r.GET(<span class="hljs-string">&quot;/&quot;</span>, myfunc.Index)<br>    <br>	<span class="hljs-comment">// FORM表单提交到了&quot;showUserInfo&quot;路径,由myfunc.ShowUserInfo对POST数据进行处理</span><br>	r.POST(<span class="hljs-string">&quot;/showUserInfo&quot;</span>, myfunc.ShowUserInfo)<br>	r.Run()<br>&#125;<br></code></pre></td></tr></table></figure>

<p>myfunc.Index</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Index</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>    <span class="hljs-comment">// 渲染FORM表单的HTML页面</span><br>	context.HTML(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;index.html&quot;</span>, <span class="hljs-literal">nil</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<p>index.html</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402268.png" srcset="/img/loading.gif" lazyload alt="image-20230403165050649"></p>
<p>myfunc.ShowUserInfo</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Context)</span></span> PostForm(key <span class="hljs-type">string</span>) (value <span class="hljs-type">string</span>)<br></code></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ShowUserInfo</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>    <span class="hljs-comment">// 对index.html form 表单提交的数据作显示</span><br>	username := context.PostForm(<span class="hljs-string">&quot;username&quot;</span>)<br>	password := context.PostForm(<span class="hljs-string">&quot;pwd&quot;</span>)<br>	context.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;username = %s password = %s\n&quot;</span>, username, password)<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="获取POST数据"><a href="#获取POST数据" class="headerlink" title="获取POST数据"></a>获取POST数据</h3><h4 id="DefaultPostForm"><a href="#DefaultPostForm" class="headerlink" title="DefaultPostForm"></a>DefaultPostForm</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Context)</span></span> DefaultPostForm(key <span class="hljs-type">string</span>, defaultValue <span class="hljs-type">string</span>) <span class="hljs-type">string</span><br></code></pre></td></tr></table></figure>

<p>作用：对于FORM表单中未定义的数据设置一个默认值</p>
<p>form表单中定义了<code>username</code>、<code>pwd</code>参数：</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402175.png" srcset="/img/loading.gif" lazyload alt="image-20230403170240171"></p>
<p>对 <code>username、pwd、age</code> 参数都定义默认值：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ShowUserInfo</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	username := context.DefaultPostForm(<span class="hljs-string">&quot;username&quot;</span>, <span class="hljs-string">&quot;test&quot;</span>)<br>	password := context.DefaultPostForm(<span class="hljs-string">&quot;pwd&quot;</span>, <span class="hljs-string">&quot;test&quot;</span>)<br>	age := context.DefaultPostForm(<span class="hljs-string">&quot;age&quot;</span>, <span class="hljs-string">&quot;18&quot;</span>)<br>	context.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;username = %s password = %s age = %s\n&quot;</span>, username, password, age)<br>&#125;<br></code></pre></td></tr></table></figure>

<p>空表单提交：</p>
<p>只有 age 参数的默认值起作用</p>
<img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402257.png" srcset="/img/loading.gif" lazyload alt="image-20230403170419530" style="zoom:67%;" />

<h4 id="PostFormArray"><a href="#PostFormArray" class="headerlink" title="PostFormArray"></a>PostFormArray</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Context)</span></span> PostFormArray(key <span class="hljs-type">string</span>) (values []<span class="hljs-type">string</span>)<br></code></pre></td></tr></table></figure>



<p>相同的参数：</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402452.png" srcset="/img/loading.gif" lazyload alt="image-20230403171359388"></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402537.png" srcset="/img/loading.gif" lazyload alt="image-20230403171419194"></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ShowUserInfo</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	hobbys := context.PostFormArray(<span class="hljs-string">&quot;Hobby&quot;</span>)<br>	context.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;hobbys = %v&quot;</span>, hobbys)<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402204.png" srcset="/img/loading.gif" lazyload alt="image-20230403171457930"></p>
<h4 id="PostFormMap"><a href="#PostFormMap" class="headerlink" title="PostFormMap"></a>PostFormMap</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Context)</span></span> PostFormMap(key <span class="hljs-type">string</span>) (dicts <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>)<br></code></pre></td></tr></table></figure>



<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402784.png" srcset="/img/loading.gif" lazyload alt="image-20230403171904931"></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402381.png" srcset="/img/loading.gif" lazyload alt="image-20230403171913956"></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ShowUserInfo</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	User := context.PostFormMap(<span class="hljs-string">&quot;User&quot;</span>)<br>	context.JSON(<span class="hljs-number">200</span>, User)<br>&#125;<br></code></pre></td></tr></table></figure>

<img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402715.png" srcset="/img/loading.gif" lazyload alt="image-20230403172006268" style="zoom:67%;" />

<h2 id="同步异步"><a href="#同步异步" class="headerlink" title="同步异步"></a>同步异步</h2><h3 id="同步交互"><a href="#同步交互" class="headerlink" title="同步交互"></a>同步交互</h3><p>浏览器工作 -&gt; 交给服务器 -&gt; 服务器处理完 -&gt; 浏览器 …</p>
<p>浏览器工作时，服务器空闲；</p>
<p>服务器工作时，浏览器也要等服务器工作完成。</p>
<p>在交替工作过程中无形之中造成的时间的浪费 ；</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051402270.png" srcset="/img/loading.gif" lazyload alt="image-20230403172848119"></p>
<p>优点：</p>
<ul>
<li>可以保留浏览器后退按钮的正常功能。在动态更新页面的情况下，用户可以回到前一个页面状态，浏览器能记下历史记录中的静态页面,用户通常都希望单击后退按钮时，就能够取消他们的前一次操作，同步交互可以实现这个需求。</li>
</ul>
<p>缺点：</p>
<ol>
<li><p>同步交互的不足之处，会给用户一种不连贯的体验，当服务器处理请求时，用户只能等待状态，页面中的显示内容只能是空白。</p>
</li>
<li><p>因为已经跳转到新的页面,原本在页面上的信息无法保存,好多信息需要重新填写</p>
</li>
</ol>
<h3 id="异步交互"><a href="#异步交互" class="headerlink" title="异步交互"></a>异步交互</h3><p>和同步交换相反，浏览器在工作的时候，服务器就在进行相应的工作，不需要等待浏览器工作<strong>完成之后</strong>，服务器再<strong>开始工作</strong>。</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403375.png" srcset="/img/loading.gif" lazyload alt="image-20230403173344750"></p>
<p>在操作页面的过程中，就可以向服务器发送各种请求并且可以将信息返回给浏览器，浏览器不出现空闲等待的现象，该工作还是工作，互不影响，效率高 –&gt; 异步交互方法 ，可以减少用户话费的时间，提高用户的体验感。</p>
<p>优点：</p>
<ol>
<li><p>前端用户操作和后台服务器运算可以同时进行,可以充分利用用户操作的间隔时间完成运算</p>
</li>
<li><p>页面没有跳转,响应回来的数据直接就在原页面上,页面原有信息得以保留</p>
</li>
</ol>
<p>缺点</p>
<ul>
<li>可能破坏浏览器后退按钮的正常行为。</li>
<li>在动态更新页面的情况下，用户无法回到前一个页面状态，这是因为浏览器仅能记录的始终是当前一个的静态页面。</li>
<li>用户通常都希望单击后退按钮，就能够取消他们的前一次操作，但是在AJAX这样异步的程序，却无法这样做。</li>
</ul>
<h2 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>AJAX 即 Asynchronous Javascript And XML（异步 JavaScript和 XML），是指一种创建交互式、快速动态网页应用的网页开发技术，无需重新加载整个网页的情况下，能够<strong>更新部分网页</strong>的技术。</p>
<p>通过在后台与服务器进行少量数据交换，AJAX 可以使网页实现异步更新。</p>
<p>这意味着可以在不重新加载整个网页的情况下，对网页的<strong>某部分</strong>进行更新。</p>
<p>AJAX的最大的特点： <strong>异步访问，局部刷新</strong></p>
<p>agax 在 jQuery 中，引入 jQuery 即可。</p>
<h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><blockquote>
<p>ajax之验证用户名是否被占用</p>
</blockquote>
<p>注册用户时，在输入用户名之后就检测用户名是否重复，而不是把信息输入完成提交之后再检测用户名是否重复。</p>
<p>实现原理：</p>
<ul>
<li>在用户输入完用户名，光标定位到密码的时候，就把用户名传递给后端，后端进行重复检测，之后返回。</li>
</ul>
<p>前端：</p>
<p>在用户名框失去焦点后，调用后端方法。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.w3.org/1999/html&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Register<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/css&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/s/css/mycss.css&quot;</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 引入 jQuery --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>  <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/s/js/jquery-3.6.3.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/register&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>    username:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;uname&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;uname&quot;</span> &gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;errMsg&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><br>    password:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;pwd&quot;</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;register&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// 获取用户名文本框</span></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> unametext = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;uname&quot;</span>);</span><br><span class="language-javascript">    <span class="hljs-comment">// 失去焦点时候,触发事件,执行后面的函数(也就是去请求/ajaxpost,后端去判断用户名重复)</span></span><br><span class="language-javascript">    unametext.<span class="hljs-property">onblur</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">var</span> uname = unametext.<span class="hljs-property">value</span>;</span><br><span class="language-javascript">      <span class="hljs-comment">// JSON格式的参数:$.ajax(&#123;属性名:属性值,属性名:属性值,方法名:方法&#125;)</span></span><br><span class="language-javascript">      $.<span class="hljs-title function_">ajax</span>(</span><br><span class="language-javascript">              &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">url</span>:<span class="hljs-string">&quot;/ajaxpost&quot;</span>,  <span class="hljs-comment">// 请求路由</span></span><br><span class="language-javascript">                <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;POST&quot;</span>, <span class="hljs-comment">// 请求类型</span></span><br><span class="language-javascript">                <span class="hljs-attr">data</span>:&#123;  <span class="hljs-comment">// 向后端发送的数据</span></span><br><span class="language-javascript">                  <span class="hljs-string">&quot;uname&quot;</span>:uname</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-attr">success</span>:<span class="hljs-keyword">function</span> (<span class="hljs-params">info</span>)&#123;  <span class="hljs-comment">// 后台响应成功时调用的函数,形参info是自定义的,它表示后端传递过滤的消息</span></span><br><span class="language-javascript">                    <span class="hljs-comment">// 定位errMsg,将后端传递过来的数据显示到这个span中</span></span><br><span class="language-javascript">                    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;errMsg&quot;</span>).<span class="hljs-property">innerText</span> = info[<span class="hljs-string">&quot;msg&quot;</span>]</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-attr">fail</span>:<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;  <span class="hljs-comment">// 后台响应失败时调用的函数</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">              &#125;</span><br><span class="language-javascript">      )</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>Go：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	r := gin.Default()<br>	r.LoadHTMLGlob(<span class="hljs-string">&quot;templates/*&quot;</span>)<br>	r.Static(<span class="hljs-string">&quot;/s&quot;</span>, <span class="hljs-string">&quot;static&quot;</span>)<br>	r.GET(<span class="hljs-string">&quot;/&quot;</span>, myfunc.Index)<br>	<span class="hljs-comment">// ajax 处理路由</span><br>	r.POST(<span class="hljs-string">&quot;/ajaxpost&quot;</span>, myfunc.Repeat)<br>	r.POST(<span class="hljs-string">&quot;/register&quot;</span>, myfunc.Register)<br>	r.Run()<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Repeat</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	uname := context.PostForm(<span class="hljs-string">&quot;uname&quot;</span>)<br>	<span class="hljs-keyword">if</span> uname == <span class="hljs-string">&quot;admin&quot;</span> &#123;<br>        <span class="hljs-comment">// 向前端传送JSON数据</span><br>		context.JSON(<span class="hljs-number">200</span>, gin.H&#123;<br>			<span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;用户名已经被注册!&quot;</span>,<br>		&#125;)<br>	&#125; <span class="hljs-keyword">else</span> &#123;<br>		context.JSON(<span class="hljs-number">200</span>, gin.H&#123;<br>			<span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>		&#125;)<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>gin.H{}</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// H is a shortcut for map[string]interface&#123;&#125;</span><br><span class="hljs-keyword">type</span> H <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]any<br></code></pre></td></tr></table></figure>

<p>底层发送JSON数据：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go">msgdata := <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>&#123;&#125;&#123;<br>    <span class="hljs-string">&quot;msg&quot;</span>:<span class="hljs-string">&quot;&quot;</span>,<br>&#125;<br></code></pre></td></tr></table></figure>

<p>any -&gt; interface{}</p>
<h2 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h2><h3 id="FORM表单"><a href="#FORM表单" class="headerlink" title="FORM表单"></a>FORM表单</h3><h4 id="单个文件"><a href="#单个文件" class="headerlink" title="单个文件"></a>单个文件</h4><p>前端：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/save&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span> <span class="hljs-attr">enctype</span>=<span class="hljs-string">&quot;multipart/form-data&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;myfile&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;upload&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li>method&#x3D;”post”</li>
<li>enctype&#x3D;”multipart&#x2F;form-data”</li>
<li>type&#x3D;”file”</li>
</ul>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403707.png" srcset="/img/loading.gif" lazyload alt="image-20230403201243826"></p>
<p>后端：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go">r.GET(<span class="hljs-string">&quot;/upload&quot;</span>, myfunc.Upload)		<span class="hljs-comment">// GET渲染HTML页面</span><br>r.POST(<span class="hljs-string">&quot;/save&quot;</span>, myfunc.Save)		<span class="hljs-comment">// POST对文件进行保存</span><br></code></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Upload</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	context.HTML(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;uploadfile.html&quot;</span>, <span class="hljs-literal">nil</span>)<br>&#125;<br></code></pre></td></tr></table></figure>



<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Save</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	<span class="hljs-comment">// 接收文件</span><br>	myfile, err := context.FormFile(<span class="hljs-string">&quot;myfile&quot;</span>)<br>	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>		context.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;error: %v&quot;</span>, err)<br>	&#125;<br>	<span class="hljs-comment">// 时间戳字符串作为保存文件名前缀,防止同名文件替换</span><br>	timestamp := strconv.FormatInt(time.Now().Unix(), <span class="hljs-number">10</span>)<br>	<span class="hljs-comment">// 保存文件</span><br>	ferr := context.SaveUploadedFile(myfile, <span class="hljs-string">&quot;./uploadfiles/&quot;</span>+timestamp+myfile.Filename)<br>	<span class="hljs-keyword">if</span> ferr != <span class="hljs-literal">nil</span> &#123;<br>		context.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;上传失败:%v&quot;</span>, ferr)<br>	&#125; <span class="hljs-keyword">else</span> &#123;<br>		context.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;上传成功&quot;</span>)<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<p>通过 <code>FormFile</code> 接收前端FORM传递的文件：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Context)</span></span> FormFile(name <span class="hljs-type">string</span>) (*multipart.FileHeader, <span class="hljs-type">error</span>)<br></code></pre></td></tr></table></figure>

<p>*multipart.FileHeader：</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403374.png" srcset="/img/loading.gif" lazyload alt="image-20230403195213630"></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Context)</span></span> SaveUploadedFile(file *multipart.FileHeader, dst <span class="hljs-type">string</span>) <span class="hljs-type">error</span><br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051407830.png" srcset="/img/loading.gif" lazyload alt="image-20230403202305168"></p>
<h4 id="多个文件"><a href="#多个文件" class="headerlink" title="多个文件"></a>多个文件</h4><p>多个相同name的文件上传：（ 如果是不同的，直接多个 <code>context.FormFile</code> 即可 ）</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403385.png" srcset="/img/loading.gif" lazyload alt="image-20230403203308426"></p>
<p>后端：</p>
<p>获取表单：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Context)</span></span> MultipartForm() (*multipart.Form, <span class="hljs-type">error</span>)<br></code></pre></td></tr></table></figure>

<p>获取表单的<code>File</code>：</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403051.png" srcset="/img/loading.gif" lazyload alt="image-20230403203411031"></p>
<p>遍历<code>File</code>获取其value进行保存。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Saves</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	<span class="hljs-comment">// 接收表单</span><br>	form, err := context.MultipartForm()<br>	<span class="hljs-comment">// 在表单中获取相同name的文件</span><br>	files := form.File[<span class="hljs-string">&quot;myfile&quot;</span>]<br>	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>		context.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;error: %v&quot;</span>, err)<br>	&#125;<br>	timestamp := strconv.FormatInt(time.Now().Unix(), <span class="hljs-number">10</span>)<br>	<span class="hljs-keyword">for</span> _, file := <span class="hljs-keyword">range</span> files &#123;<br>		context.SaveUploadedFile(file, <span class="hljs-string">&quot;./uploadfiles/&quot;</span>+timestamp+file.Filename)<br>	&#125;<br>	context.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;上传成功&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403722.png" srcset="/img/loading.gif" lazyload alt="image-20230403203809053"></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403161.png" srcset="/img/loading.gif" lazyload alt="image-20230403203833783"></p>
<h3 id="AGAX"><a href="#AGAX" class="headerlink" title="AGAX"></a>AGAX</h3><h4 id="单个文件-1"><a href="#单个文件-1" class="headerlink" title="单个文件"></a>单个文件</h4><p>前端：</p>
<p>在点击提交时，ajax 传递文件给后端。</p>
<p>使用 ajax 传递文件需要设置两个参数：            </p>
<ul>
<li>contentType:false -&gt; 默认为true，当设置为true的时候，jquery ajax 提交的时候不会序列化 data，而是直接使用data</li>
<li>processData:false, -&gt; 目的是防止上传文件中出现分界符导致服务器无法正确识别文件起始位置</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.w3.org/1999/html&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>upload file<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>  <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/s/js/jquery-3.6.3.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;myfile&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;upload&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;upload&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;msg&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// 绑定upload按钮,按钮被点击后使用ajax提交文件</span></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> uploadbutton = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;upload&quot;</span>);</span><br><span class="language-javascript">    <span class="hljs-comment">// 按钮被点击</span></span><br><span class="language-javascript">    uploadbutton.<span class="hljs-property">onclick</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-comment">// 获取第一个文件上传 $(&quot;#myfile&quot;)[0] 的第一个文件 (files[0]) --&gt; id为myfile的第一个的第一个文件</span></span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> file = $(<span class="hljs-string">&quot;#myfile&quot;</span>)[<span class="hljs-number">0</span>].<span class="hljs-property">files</span>[<span class="hljs-number">0</span>];</span><br><span class="language-javascript">        <span class="hljs-comment">// 创建存放form表单的数据</span></span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> form_data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();</span><br><span class="language-javascript">        <span class="hljs-comment">// 将file存进form_data --&gt; 键值对的形式 myfile:file</span></span><br><span class="language-javascript">        form_data.<span class="hljs-title function_">append</span>(<span class="hljs-string">&quot;myfile&quot;</span>,file)</span><br><span class="language-javascript">        <span class="hljs-comment">// 使用ajax提交数据给后端</span></span><br><span class="language-javascript">        $.<span class="hljs-title function_">ajax</span>(&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;/save&quot;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;POST&quot;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">data</span>: form_data,</span><br><span class="language-javascript">            <span class="hljs-attr">contentType</span>: <span class="hljs-literal">false</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">processData</span>: <span class="hljs-literal">false</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">success</span>:<span class="hljs-keyword">function</span> (<span class="hljs-params">info</span>)&#123;</span><br><span class="language-javascript">                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;msg&quot;</span>).<span class="hljs-property">innerText</span> = info[<span class="hljs-string">&quot;msg&quot;</span>]</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>后端接收 agax 传递的数据，再返回 JSON 数据给 ajax：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Saves</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	<span class="hljs-comment">// 接收文件, ajax向form_data里面放的是 myfile:文件,所以这里使用myfile作为key进行接收</span><br>	file, err := context.FormFile(<span class="hljs-string">&quot;myfile&quot;</span>)<br>	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>		context.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;error: %v&quot;</span>, err)<br>	&#125;<br>	timestamp := strconv.FormatInt(time.Now().Unix(), <span class="hljs-number">10</span>)<br>	ferr := context.SaveUploadedFile(file, <span class="hljs-string">&quot;./uploadfiles/&quot;</span>+timestamp+file.Filename)<br>	<span class="hljs-keyword">if</span> ferr != <span class="hljs-literal">nil</span> &#123;<br>		context.JSON(<span class="hljs-number">200</span>, gin.H&#123;<span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;上传失败&quot;</span>&#125;)<br>	&#125; <span class="hljs-keyword">else</span> &#123;<br>		context.JSON(<span class="hljs-number">200</span>, gin.H&#123;<span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;上传成功&quot;</span>&#125;)<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="多个文件-1"><a href="#多个文件-1" class="headerlink" title="多个文件"></a>多个文件</h4><p>agax 上传多个文件：</p>
<ol>
<li>agax 遍历将文件存进表单数据 <code>FormData()</code> 后发送</li>
<li>后端获取表单数据，遍历进行保存</li>
</ol>
<p>前端：</p>
<p><code>class</code> 可以多个，<code>id</code> 只能一个</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;myfile&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;myfile&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;myfile&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">br</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;upload&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;upload&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;msg&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>后端：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Saves</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	<span class="hljs-comment">// 接收表单</span><br>	form, err := context.MultipartForm()<br>	<span class="hljs-comment">// 在表单中的多个myfile</span><br>	files := form.File[<span class="hljs-string">&quot;myfile&quot;</span>]<br>	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>		context.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;error: %v&quot;</span>, err)<br>	&#125;<br>	timestamp := strconv.FormatInt(time.Now().Unix(), <span class="hljs-number">10</span>)<br>	<span class="hljs-keyword">for</span> _, file := <span class="hljs-keyword">range</span> files &#123;<br>		context.SaveUploadedFile(file, <span class="hljs-string">&quot;./uploadfiles/&quot;</span>+timestamp+file.Filename)<br>	&#125;<br>	context.JSON(<span class="hljs-number">200</span>, gin.H&#123;<span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;上传成功&quot;</span>&#125;)<br>&#125;<br></code></pre></td></tr></table></figure>



<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403879.png" srcset="/img/loading.gif" lazyload alt="image-20230403221816492"></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403729.png" srcset="/img/loading.gif" lazyload alt="image-20230403221832914"></p>
<h2 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h2><p>响应重定向：请求服务器后，服务器通知浏览器，让浏览器去自主请求其他资源的一种方式。</p>
<p>浏览器请求 &#x2F;A -&gt; 服务器返回 302 状态码 + Location（ 重定向地址 ）-&gt; 浏览器请求 Location</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	r := gin.Default()<br>	r.LoadHTMLGlob(<span class="hljs-string">&quot;templates/*&quot;</span>)<br>	r.Static(<span class="hljs-string">&quot;/s&quot;</span>, <span class="hljs-string">&quot;static&quot;</span>)<br>	<span class="hljs-comment">// &quot;/&quot; 重定向到 &quot;/redi&quot;路 径</span><br>	r.GET(<span class="hljs-string">&quot;/&quot;</span>, myfunc.Redi)<br>	r.GET(<span class="hljs-string">&quot;/redi&quot;</span>, myfunc.Index)<br>	r.Run()<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Redi</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	context.Redirect(http.StatusFound, <span class="hljs-string">&quot;/redi&quot;</span>)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Index</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	context.String(http.StatusOK, <span class="hljs-string">&quot;重定向成功&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>http.Status...</code> 是 http 包中定义的状态码常量</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403319.png" srcset="/img/loading.gif" lazyload alt="image-20230405092827223"></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403506.png" srcset="/img/loading.gif" lazyload alt="image-20230405092904668"></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403611.png" srcset="/img/loading.gif" lazyload alt="image-20230405092919402"></p>
<h2 id="模板语法"><a href="#模板语法" class="headerlink" title="模板语法"></a>模板语法</h2><h3 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h3><p>在写动态页面的网站的时候，我们常常将不变的部分提出成为模板，可变部分通过后端程序的渲染来生成动态网页，golang也支持模板渲染。</p>
<p>模板内内嵌的语法支持，全部需要加  <code>&#123;&#123;&#125;&#125;</code>  来标记。</p>
<p>在模板文件内：</p>
<ul>
<li><code>.</code>：上下文</li>
<li><code>$.</code>：根级的上下文（ <code>.Age</code> 的 <code>$.</code> 代表 <code>.</code> ，用于再循环内表现外部的 ）</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Index</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	name := <span class="hljs-string">&quot;fuming&quot;</span><br>	age := <span class="hljs-string">&quot;18&quot;</span><br>	hobbys := []<span class="hljs-type">string</span>&#123;<span class="hljs-string">&quot;睡觉&quot;</span>, <span class="hljs-string">&quot;吃饭&quot;</span>&#125;<br>	p := <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]any&#123;<br>		<span class="hljs-string">&quot;name&quot;</span>:   name,<br>		<span class="hljs-string">&quot;age&quot;</span>:    age,<br>		<span class="hljs-string">&quot;hobbys&quot;</span>: hobbys,<br>	&#125;<br>	context.HTML(http.StatusOK, <span class="hljs-string">&quot;index.html&quot;</span>, p)<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs go">&lt;body&gt;<br>  &#123;&#123;.&#125;&#125;&lt;br&gt;<br>  &#123;&#123;.name&#125;&#125;&lt;br&gt;<br>  &#123;&#123;.age&#125;&#125;&lt;br&gt;<br>  &#123;&#123;.hobbys&#125;&#125;&lt;br&gt;<br><br>  &#123;&#123;<span class="hljs-keyword">range</span> .hobbys&#125;&#125;<br>    &#123;&#123;.&#125;&#125;<br>  &#123;&#123;end&#125;&#125;&lt;br&gt;<br><br>  &#123;&#123;<span class="hljs-keyword">range</span> .hobbys&#125;&#125;<br>    &#123;&#123;<span class="hljs-comment">/*  在这个循环中 &quot;.&quot; 代表 hobbys 中的元素   */</span>&#125;&#125;<br>    &#123;&#123;<span class="hljs-comment">/*  使用 &quot;$.&quot; 表示根级的上下文,即可获取到 .name / .age 元素 */</span>&#125;&#125;<br>    &#123;&#123;$.name&#125;&#125;<br>    &#123;&#123;$.age&#125;&#125;<br>    &#123;&#123;.&#125;&#125;&lt;br&gt;<br>  &#123;&#123;end&#125;&#125;<br><br>  &#123;&#123;<span class="hljs-keyword">range</span> $i,$v := .hobbys&#125;&#125;<br>    &#123;&#123;$i&#125;&#125; - &#123;&#123;$v&#125;&#125; &lt;br&gt;<br>  &#123;&#123;end&#125;&#125;<br><br>&lt;/body&gt;<br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403253.png" srcset="/img/loading.gif" lazyload alt="image-20230405095750175"></p>
<h3 id="符号支持"><a href="#符号支持" class="headerlink" title="符号支持"></a>符号支持</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  &#123;&#123;&quot;My name is fuming .&quot;&#125;&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>  &#123;&#123;&#x27;a&#x27;&#125;&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>  &#123;&#123;`a`&#125;&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>  &#123;&#123;print &quot;My name is fuming .&quot;&#125;&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>  &#123;&#123;print nil&#125;&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403829.png" srcset="/img/loading.gif" lazyload alt="image-20230405100226771"></p>
<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go">&lt;body&gt;<br>  &#123;&#123;$name := <span class="hljs-string">&quot;fuming&quot;</span>&#125;&#125;<br>  &#123;&#123;$name&#125;&#125;&lt;br&gt;<br>  &#123;&#123;<span class="hljs-built_in">print</span> <span class="hljs-string">&quot;My name is &quot;</span> $name &#125;&#125;<br>&lt;/body&gt;<br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403429.png" srcset="/img/loading.gif" lazyload alt="image-20230405100610475"></p>
<h3 id="判断"><a href="#判断" class="headerlink" title="判断"></a>判断</h3><p>golang的模板也支持if的条件判断，当前支持最简单的<code>bool</code>类型和<code>字符串</code>类型的判断。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go">&#123;&#123;<span class="hljs-keyword">if</span> .condition&#125;&#125;<br>&#123;&#123;end&#125;&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go">&#123;&#123;<span class="hljs-keyword">if</span> .condition&#125;&#125;<br>&#123;&#123;<span class="hljs-keyword">else</span>&#125;&#125;<br>&#123;&#123;end&#125;&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go">&#123;&#123;<span class="hljs-keyword">if</span> .condition1&#125;&#125;<br>&#123;&#123;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> .contition2&#125;&#125;<br>&#123;&#123;end&#125;&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>当<code>.condition</code>为<code>bool</code>类型的时候，则为<code>true</code>表示执行</li>
<li>当<code>.condition</code>为<code>string</code>类型的时候，则<code>非空</code>表示执行</li>
</ul>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403634.png" srcset="/img/loading.gif" lazyload alt="image-20230405101256563"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  &#123;&#123;if .b&#125;&#125;<br>    &#123;&#123;if .name&#125;&#125;<br>      &#123;&#123;.name&#125;&#125;<br>      &#123;&#123;.age&#125;&#125;<br>      &#123;&#123;.hobbys&#125;&#125;<br>    &#123;&#123;end&#125;&#125;<br>  &#123;&#123;else&#125;&#125;<br>    &#123;&#123;print nil&#125;&#125;<br>  &#123;&#123;end&#125;&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>



<p>对于逻辑判断可以通过<code>模板函数</code>来完成。</p>
<h3 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go">&#123;&#123;<span class="hljs-keyword">range</span> $i, $v := .slice&#125;&#125;<br>&#123;&#123;end&#125;&#125;<br></code></pre></td></tr></table></figure>



<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go">&#123;&#123;<span class="hljs-keyword">range</span> .slice&#125;&#125;<br>&#123;&#123;end&#125;&#125;<br></code></pre></td></tr></table></figure>

<p>外部变量：<code>$</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go">&#123;&#123;<span class="hljs-keyword">range</span> .slice&#125;&#125;<br>	&#123;&#123;$.ArticleContent&#125;&#125;<br>&#123;&#123;end&#125;&#125;<br></code></pre></td></tr></table></figure>

<p>else：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go">&#123;&#123;<span class="hljs-keyword">range</span> .slice&#125;&#125;<br>    &#123;&#123;.&#125;&#125;<br>&#123;&#123;<span class="hljs-keyword">else</span>&#125;&#125;<br>    暂无数据                 &#123;&#123;<span class="hljs-comment">/* 当 .slice 为空 或者 长度为 0 时会执行这里 */</span>&#125;&#125;<br>&#123;&#123;end&#125;&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  &#123;&#123;range .hobby&#125;&#125;<br>    &#123;&#123;.&#125;&#125;<br>  &#123;&#123;else&#125;&#125;<br>    &#123;&#123;print nil&#125;&#125;<br>  &#123;&#123;end&#125;&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403731.png" srcset="/img/loading.gif" lazyload alt="image-20230405101802334"></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403353.png" srcset="/img/loading.gif" lazyload alt="image-20230405101810433"></p>
<h3 id="with"><a href="#with" class="headerlink" title="with"></a>with</h3><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name"><span class="hljs-built_in">with</span></span> pipeline &#125;&#125;</span><span class="language-xml"> T1 </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">end</span> &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name"><span class="hljs-built_in">with</span></span> pipeline &#125;&#125;</span><span class="language-xml"> T1 </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">else</span> &#125;&#125;</span><span class="language-xml"> T0 </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">end</span> &#125;&#125;</span><br></code></pre></td></tr></table></figure>

<p>pipeline 判断条件：获取数据</p>
<p>如何可以从后端获取相应的数据，那么在里面，<code>.</code> 就代表 pipeline；</p>
<p>否则执行 T0；</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403795.png" srcset="/img/loading.gif" lazyload alt="image-20230405104058183"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 后端没有定义 a , 自然无法获取，执行 print 语句 --&gt;</span><br>    &#123;&#123;with .a&#125;&#125;<br>      &#123;&#123;.Name&#125;&#125;<br>      &#123;&#123;.Age&#125;&#125;<br>    &#123;&#123;else&#125;&#125;<br>      &#123;&#123;print nil&#125;&#125;<br>    &#123;&#123;end&#125;&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><br>    &#123;&#123;with .b&#125;&#125;<br>      &#123;&#123;.Name&#125;&#125;<br>      &#123;&#123;.Age&#125;&#125;<br>    &#123;&#123;else&#125;&#125;<br>      &#123;&#123;print nil&#125;&#125;<br>    &#123;&#123;end&#125;&#125;<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403897.png" srcset="/img/loading.gif" lazyload alt="image-20230405104112867"></p>
<h3 id="template"><a href="#template" class="headerlink" title="template"></a>template</h3><p>引入另一个目标文件</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go">&#123; &#123;template <span class="hljs-string">&quot;模板名&quot;</span> 传输数据&#125; &#125;<br></code></pre></td></tr></table></figure>

<p>在被引入的模版文件中需要<code>define</code>名字。</p>
<p>在 index.html 中引入 test.html 并传入数据：</p>
<p>index.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  &#123;&#123;template &quot;test.html&quot; .&#125;&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>test.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html">&#123;&#123;define &quot;test.html&quot;&#125;&#125;		<span class="hljs-comment">&lt;!-- 定义 --&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>内嵌页面<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123;.&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>	<span class="hljs-comment">&lt;!-- 获取 index.html 中传输过来的数据 --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br>&#123;&#123;end&#125;&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403996.png" srcset="/img/loading.gif" lazyload alt="image-20230405105323556"></p>
<h2 id="模板函数"><a href="#模板函数" class="headerlink" title="模板函数"></a>模板函数</h2><table>
<thead>
<tr>
<th>函数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>print</td>
<td>打印字符串</td>
</tr>
<tr>
<td>printf</td>
<td>按照格式化的字符串输出</td>
</tr>
<tr>
<td>len</td>
<td>返回对应类型的长度(map, slice, array, string, chan)</td>
</tr>
<tr>
<td>管道符 |</td>
<td>函数中使用管道传递过来的数值</td>
</tr>
<tr>
<td>括号 ()</td>
<td>提高优先级别</td>
</tr>
<tr>
<td>and</td>
<td>只要有一个为空，则整体为空；如果都不为空，则返回最后一个</td>
</tr>
<tr>
<td>or</td>
<td>只要有一个不为空，则返回第一个不为空的；如果都是空，则返回空</td>
</tr>
<tr>
<td>not</td>
<td>有值则返回false，没有值则返回true</td>
</tr>
<tr>
<td>index</td>
<td>读取指定类型对应下标的值(map, slice, array, string)</td>
</tr>
<tr>
<td>eq</td>
<td>等于equal，返回布尔值</td>
</tr>
<tr>
<td>ne</td>
<td>不等于 not equal，返回布尔值</td>
</tr>
<tr>
<td>lt</td>
<td>小于 less than，返回布尔值</td>
</tr>
<tr>
<td>le</td>
<td>小于等于less equal，返回布尔值</td>
</tr>
<tr>
<td>gt</td>
<td>大于 greater than，返回布尔值</td>
</tr>
<tr>
<td>ge</td>
<td>大于等于 greater equal，返回布尔值</td>
</tr>
<tr>
<td>Format</td>
<td>日期格式化</td>
</tr>
</tbody></table>
<h3 id="打印"><a href="#打印" class="headerlink" title="打印"></a>打印</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go">&#123;&#123;<span class="hljs-built_in">print</span> <span class="hljs-string">&quot;My name is fuming .&quot;</span>&#125;&#125;<br>&#123;&#123;printf <span class="hljs-string">&quot;My name is %s . &quot;</span> <span class="hljs-string">&quot;fuming&quot;</span>&#125;&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403018.png" srcset="/img/loading.gif" lazyload alt="image-20230405123230997"></p>
<h3 id="len"><a href="#len" class="headerlink" title="len"></a>len</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go">&#123;&#123;<span class="hljs-built_in">len</span> <span class="hljs-string">&quot;My name is fuming .&quot;</span>&#125;&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403218.png" srcset="/img/loading.gif" lazyload alt="image-20230405123309619"></p>
<h3 id="管道符"><a href="#管道符" class="headerlink" title="管道符"></a>管道符</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go">&#123;&#123;<span class="hljs-string">&quot;My name is fuming .&quot;</span> | <span class="hljs-built_in">print</span>&#125;&#125;<br>&#123;&#123;<span class="hljs-string">&quot;My name is fuming .&quot;</span> | <span class="hljs-built_in">len</span>&#125;&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403289.png" srcset="/img/loading.gif" lazyload alt="image-20230405123407826"></p>
<h3 id="括号"><a href="#括号" class="headerlink" title="括号"></a>括号</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// 优先将 &quot;fu&quot; &quot;ming&quot; 2个字符串组合，再做参数传递</span><br>&#123;&#123;printf <span class="hljs-string">&quot;My name is %s .&quot;</span> (printf <span class="hljs-string">&quot;%s%s&quot;</span> <span class="hljs-string">&quot;fu&quot;</span> <span class="hljs-string">&quot;ming&quot;</span>)&#125;&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403785.png" srcset="/img/loading.gif" lazyload alt="image-20230405124144243"></p>
<h3 id="and"><a href="#and" class="headerlink" title="and"></a>and</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go">&#123;&#123;<span class="hljs-comment">/* and */</span>&#125;&#125;<br>&#123;&#123;and .a .b&#125;&#125;&lt;br&gt;<br>&#123;&#123;<span class="hljs-comment">/* or */</span>&#125;&#125;<br>&#123;&#123;or .a .b&#125;&#125;&lt;br&gt;<br>&#123;&#123;<span class="hljs-comment">/* not */</span>&#125;&#125;<br>&#123;&#123;not .a&#125;&#125;&lt;br&gt;<br>&#123;&#123;not .b&#125;&#125;&lt;br&gt;<br>&#123;&#123;not .c&#125;&#125;&lt;br&gt;<br>&#123;&#123;<span class="hljs-comment">/* index */</span>&#125;&#125;<br>&#123;&#123;index .b.Hobbys <span class="hljs-number">0</span>&#125;&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403924.png" srcset="/img/loading.gif" lazyload alt="image-20230405125818941"></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403312.png" srcset="/img/loading.gif" lazyload alt="image-20230405125911863"></p>
<h3 id="比较"><a href="#比较" class="headerlink" title="比较"></a>比较</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs go">&#123;&#123;eq <span class="hljs-number">26</span> <span class="hljs-number">89</span>&#125;&#125;&lt;br&gt;<br>&#123;&#123;ne <span class="hljs-number">26</span> <span class="hljs-number">89</span>&#125;&#125;&lt;br&gt;<br>&#123;&#123;lt <span class="hljs-number">26</span> <span class="hljs-number">89</span>&#125;&#125;&lt;br&gt;<br>&#123;&#123;le <span class="hljs-number">26</span> <span class="hljs-number">89</span>&#125;&#125;&lt;br&gt;<br>&#123;&#123;gt <span class="hljs-number">26</span> <span class="hljs-number">89</span>&#125;&#125;&lt;br&gt;<br>&#123;&#123;ge <span class="hljs-number">26</span> <span class="hljs-number">89</span>&#125;&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051403448.png" srcset="/img/loading.gif" lazyload alt="image-20230405130238404"></p>
<h3 id="日期格式化"><a href="#日期格式化" class="headerlink" title="日期格式化"></a>日期格式化</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go">&#123;&#123;.Format <span class="hljs-string">&quot;2006-01-02 15:04:05&quot;</span>&#125;&#125;&lt;br&gt;<br>&#123;&#123;.Format <span class="hljs-string">&quot;2006-01-02&quot;</span>&#125;&#125;&lt;br&gt;<br>&#123;&#123;.Format <span class="hljs-string">&quot;15:04:05&quot;</span>&#125;&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404476.png" srcset="/img/loading.gif" lazyload alt="image-20230405130705958"></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404017.png" srcset="/img/loading.gif" lazyload alt="image-20230405130714299"></p>
<h3 id="自定义"><a href="#自定义" class="headerlink" title="自定义"></a>自定义</h3><p>在模板文件中使用后端自定义的函数：</p>
<ol>
<li>后端定义函数</li>
<li>后端注册函数（ 加载目标文件之前 ）</li>
<li>前端使用函数</li>
</ol>
<p>后端定义函数：</p>
<p>myfunc包下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Add</span><span class="hljs-params">(a, b, c <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> &#123;<br>	<span class="hljs-keyword">return</span> a + b + c<br>&#125;<br></code></pre></td></tr></table></figure>

<p>后端注册函数（ 加载目标文件之前 ）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	r := gin.Default()<br>	r.SetFuncMap(template.FuncMap&#123;<br>		<span class="hljs-comment">// 键值对 ( 前端函数名:对应后端函数名 )</span><br>		<span class="hljs-string">&quot;AddThree&quot;</span>: myfunc.Add,<br>	&#125;)<br>    <span class="hljs-comment">// 加载目标文件</span><br>	r.LoadHTMLGlob(<span class="hljs-string">&quot;templates/*&quot;</span>)<br>	r.Static(<span class="hljs-string">&quot;/s&quot;</span>, <span class="hljs-string">&quot;static&quot;</span>)<br>	r.GET(<span class="hljs-string">&quot;/&quot;</span>, myfunc.Index)<br>	r.Run()<br>&#125;<br></code></pre></td></tr></table></figure>

<p>前端使用函数：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go">&#123;&#123;AddThree <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>&#125;&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404530.png" srcset="/img/loading.gif" lazyload alt="image-20230405131856022"></p>
<h2 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h2><p>基于请求自动提取JSON、form表单和QueryString类型的数据，并把值绑定到后端指定的结构体对象中去</p>
<h3 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h3><p>前端：</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404540.png" srcset="/img/loading.gif" lazyload alt="image-20230405150714325"></p>
<p>后端路由：</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404445.png" srcset="/img/loading.gif" lazyload alt="image-20230405150733434"></p>
<p>myfunc.Post：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> user <span class="hljs-keyword">struct</span> &#123;<br>	Uname  <span class="hljs-type">string</span> <span class="hljs-string">`form:&quot;username&quot;`</span><br>	Passwd <span class="hljs-type">string</span> <span class="hljs-string">`form:&quot;password&quot;`</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Post</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	<span class="hljs-keyword">var</span> u user<br>	err := context.ShouldBind(&amp;u)<br>	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>		context.String(<span class="hljs-number">404</span>, <span class="hljs-string">&quot;绑定失败&quot;</span>)<br>	&#125; <span class="hljs-keyword">else</span> &#123;<br>		context.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;%v&quot;</span>, u)<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404739.png" srcset="/img/loading.gif" lazyload alt="image-20230405150835741"></p>
<h3 id="路径querystring"><a href="#路径querystring" class="headerlink" title="路径querystring"></a>路径querystring</h3><p>页面以get方式请求数据，WEB SERVER将请求数据放入名为 QUERY_STRING的环境变量中，所以可以称作为querystring类型的绑定。</p>
<p><a target="_blank" rel="noopener" href="http://43.139.185.135:8080/get?username=fuming&password=123456">http://43.139.185.135:8080/get?username=fuming&amp;password=123456</a></p>
<p>路由：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go">r.GET(<span class="hljs-string">&quot;/get&quot;</span>, myfunc.Get)<br></code></pre></td></tr></table></figure>

<p>myfunc.Get</p>
<p>和<code>form</code>表单的一模一样：</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404182.png" srcset="/img/loading.gif" lazyload alt="image-20230405151631782"></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404152.png" srcset="/img/loading.gif" lazyload alt="image-20230405151650972"></p>
<h3 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h3><p>前端使用<code>ajax</code>将JSON数据传递给后端。</p>
<p>前端：</p>
<ul>
<li>contentType:”application&#x2F;json”</li>
<li>JSON.stringify</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br>  username:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;username&quot;</span> &gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>  password:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">var</span> sub = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;submit&quot;</span>);</span><br><span class="language-javascript">  sub.<span class="hljs-property">onclick</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> uname = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;username&quot;</span>).<span class="hljs-property">value</span>;</span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> passwd = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;password&quot;</span>).<span class="hljs-property">value</span>;</span><br><span class="language-javascript">    $.<span class="hljs-title function_">ajax</span>(&#123;</span><br><span class="language-javascript">      <span class="hljs-attr">url</span>:<span class="hljs-string">&quot;/post&quot;</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>:<span class="hljs-string">&quot;post&quot;</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">contentType</span>:<span class="hljs-string">&quot;application/json&quot;</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">data</span>:<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-string">&quot;uname&quot;</span>:uname,</span><br><span class="language-javascript">        <span class="hljs-string">&quot;passwd&quot;</span>:passwd</span><br><span class="language-javascript">      &#125;),</span><br><span class="language-javascript">      <span class="hljs-attr">success</span>:<span class="hljs-keyword">function</span> (<span class="hljs-params">info</span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-title function_">alert</span>(info[<span class="hljs-string">&quot;msg&quot;</span>]);</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript">  &#125;;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404047.png" srcset="/img/loading.gif" lazyload alt="image-20230405152948190"></p>
<p>路由：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go">r.GET(<span class="hljs-string">&quot;/&quot;</span>, myfunc.Index)<br>r.POST(<span class="hljs-string">&quot;/post&quot;</span>, myfunc.Post)<br></code></pre></td></tr></table></figure>

<p>后端接收JSON绑定到结构体即可：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> user <span class="hljs-keyword">struct</span> &#123;<br>	Uname  <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;uname&quot;`</span><br>	Passwd <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;passwd&quot;`</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Post</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	<span class="hljs-keyword">var</span> u user<br>	err := context.ShouldBind(&amp;u)<br>	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>		context.JSON(<span class="hljs-number">404</span>, gin.H&#123;<br>			<span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;绑定失败&quot;</span>,<br>		&#125;)<br>	&#125; <span class="hljs-keyword">else</span> &#123;<br>		context.JSON(<span class="hljs-number">200</span>, gin.H&#123;<br>			<span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;登录成功&quot;</span>,<br>		&#125;)<br>		fmt.Println(u)<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="URI"><a href="#URI" class="headerlink" title="URI"></a>URI</h3><p>URI：统一资源标识符 a&#x2F;login  </p>
<p>URL：统一资源定位符 <a target="_blank" rel="noopener" href="http://localhost:8080/a/login">http://localhost:8080/a/login</a>  </p>
<p>路由：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// 路由格式相同,优先走有路由的路线 -&gt; /admin/123456 走 myfunc.Index</span><br>r.GET(<span class="hljs-string">&quot;/uri/:username/:password&quot;</span>, myfunc.Uri)<br>r.GET(<span class="hljs-string">&quot;/uri/admin/123456&quot;</span>, myfunc.Index)<br></code></pre></td></tr></table></figure>

<p>myfunc.Uri</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> user <span class="hljs-keyword">struct</span> &#123;<br>    <span class="hljs-comment">// 添加 uri </span><br>	Uname  <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;uname&quot; uri:&quot;username&quot;`</span><br>	Passwd <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;passwd&quot; uri:&quot;password&quot;`</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Uri</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	<span class="hljs-keyword">var</span> u user<br>    <span class="hljs-comment">// 绑定uri</span><br>	err := context.ShouldBindUri(&amp;u)<br>	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>		context.String(<span class="hljs-number">404</span>, <span class="hljs-string">&quot;绑定失败&quot;</span>)<br>	&#125; <span class="hljs-keyword">else</span> &#123;<br>		context.String(<span class="hljs-number">202</span>, <span class="hljs-string">&quot;Uname=%s\nPasswd=%s&quot;</span>, u.Uname, u.Passwd)<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Context)</span></span> ShouldBindUri(obj any) <span class="hljs-type">error</span><br></code></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="http://43.139.185.135:8080/uri/fuming/123456">http://43.139.185.135:8080/uri/fuming/123456</a></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404257.png" srcset="/img/loading.gif" lazyload alt="image-20230405154559987"></p>
<p><a target="_blank" rel="noopener" href="http://43.139.185.135:8080/uri/admin/123456">http://43.139.185.135:8080/uri/admin/123456</a></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404800.png" srcset="/img/loading.gif" lazyload alt="image-20230405154632231"></p>
<h2 id="路由组"><a href="#路由组" class="headerlink" title="路由组"></a>路由组</h2><p>路由组：将不同的路由按照版本、模块进行不同的分组，利于维护，方便管理。</p>
<h3 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(group *RouterGroup)</span></span> Group(relativePath <span class="hljs-type">string</span>, handlers ...HandlerFunc) *RouterGroup<br></code></pre></td></tr></table></figure>

<p>使用<code>Group</code>方法进行分组，<code>&#123;&#125;</code> 定义组成员。</p>
<p><code>&#123;&#125;</code> 的作用就是将同一组的路由包裹起来。</p>
<p>如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs go">general := r.Group(<span class="hljs-string">&quot;/general&quot;</span>)<br>&#123;<br>    general.GET(<span class="hljs-string">&quot;/index&quot;</span>,func1)<br>    general.GET(<span class="hljs-string">&quot;/login&quot;</span>)<br>    general.GET(<span class="hljs-string">&quot;/backstage&quot;</span>)<br>&#125;<br>member := r.Group(<span class="hljs-string">&quot;/member&quot;</span>)<br>&#123;<br>    member.GET(<span class="hljs-string">&quot;/index&quot;</span>)<br>    member.GET(<span class="hljs-string">&quot;/login&quot;</span>)<br>    member.GET(<span class="hljs-string">&quot;/backstage&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<p>定义路由组后，想要执行 func1 ，就需要请求 <code>/general/index</code> 这个路由。</p>
<h3 id="抽取"><a href="#抽取" class="headerlink" title="抽取"></a>抽取</h3><ul>
<li>总路由中设置路由组（总路由）</li>
<li>模块中的路由负责映射具体的业务（模块路由：模块路由接收总路由中的某个组，对组进行具体的路由设置）</li>
</ul>
<p>总路由中设置路由组：</p>
<p><code>router/router.go</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> router<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Router</span><span class="hljs-params">(r *gin.Engine)</span></span> &#123;<br>	<span class="hljs-comment">// 定义分组</span><br>	g := r.Group(<span class="hljs-string">&quot;/general&quot;</span>)<br>	m := r.Group(<span class="hljs-string">&quot;/member&quot;</span>)<br>	<span class="hljs-comment">// 将组传递给对应模块路由</span><br>	general.Router(g)<br>	member.Router(m)<br>&#125;<br></code></pre></td></tr></table></figure>

<p>主函数中调用总路由：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	r := gin.Default()<br>	r.LoadHTMLGlob(<span class="hljs-string">&quot;templates/**/*&quot;</span>)<br>	r.Static(<span class="hljs-string">&quot;/s&quot;</span>, <span class="hljs-string">&quot;/static&quot;</span>)<br>	router.Router(r)<br>	r.Run()<br>&#125;<br></code></pre></td></tr></table></figure>

<p>模块路由中：接收组路由，然后对其组内具体路由进行设置</p>
<p><code>general/router.go</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// Router 接收一个分组路由</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Router</span><span class="hljs-params">(g *gin.RouterGroup)</span></span> &#123;<br>	g.GET(<span class="hljs-string">&quot;/&quot;</span>, index)<br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>index</code> 函数：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">index</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	context.HTML(http.StatusOK, <span class="hljs-string">&quot;general/index.html&quot;</span>, <span class="hljs-literal">nil</span>)<br>&#125;<br></code></pre></td></tr></table></figure>



<p><code>member/router.go</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Router</span><span class="hljs-params">(m *gin.RouterGroup)</span></span> &#123;<br>	m.GET(<span class="hljs-string">&quot;/&quot;</span>, index)<br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>index</code> 函数：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">index</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	context.HTML(http.StatusOK, <span class="hljs-string">&quot;member/index.html&quot;</span>, <span class="hljs-literal">nil</span>)<br>&#125;<br></code></pre></td></tr></table></figure>





<p>结构：</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404050.png" srcset="/img/loading.gif" lazyload alt="image-20230405163231519"></p>
<p><a target="_blank" rel="noopener" href="http://43.139.185.135:8080/general/">http://43.139.185.135:8080/general/</a></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404016.png" srcset="/img/loading.gif" lazyload alt="image-20230405163244775"></p>
<p><a target="_blank" rel="noopener" href="http://43.139.185.135:8080/member/">http://43.139.185.135:8080/member/</a></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404171.png" srcset="/img/loading.gif" lazyload alt="image-20230405163306383"></p>
<h2 id="中间件"><a href="#中间件" class="headerlink" title="中间件"></a>中间件</h2><h3 id="介绍-1"><a href="#介绍-1" class="headerlink" title="介绍"></a>介绍</h3><p>Gin框架允许开发者在处理请求的过程中，加入用户自己的钩子(Hook)函数(中间件函数)，这个钩子函数就叫中间件。</p>
<ul>
<li>普通函数：针对某个路由的请求</li>
<li>钩子函数：针对部分、所有请求都生效的函数</li>
</ul>
<p>中间件适合处理一些公共的业务逻辑，比如登录认证、权限校验、数据分页、记录日志、耗时统计等等。<br>比如：在访问登录后的所有页面，都必须进行登录判断，而对于每个路由函数都写一个登录判断功能自然不太可能，这时候就用到了钩子函数。定义一个钩子函数，处理登录后的所有请求。</p>
<p>函数 -&gt; 重复功能的代码块</p>
<p>钩子函数 -&gt; 重复使用的函数</p>
<p><code>gin.default</code>实例化引擎，默认有两中间件 <code>Logger</code> 和 <code>Recovery</code> 分别处理日志和错误。</p>
<h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>直接定义：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">OneMiddle</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	<span class="hljs-comment">// 这里是公用的逻辑代码</span><br>	fmt.Println(<span class="hljs-string">&quot;OneMiddle&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>

<p>间接定义：</p>
<p>定义一个函数，其返回值为一个<code>context *gin.Engine</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">TwoMiddle</span><span class="hljs-params">()</span></span> gin.HandlerFunc&#123;<br>	<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(context *gin.Context)</span></span>&#123;<br>		fmt.Println(<span class="hljs-string">&quot;TwoMiddle&quot;</span>)<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>gin.HandlerFunc</code> -&gt; <code>context *gin.Engine</code>：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// HandlerFunc defines the handler used by gin middleware as return value.</span><br><span class="hljs-keyword">type</span> HandlerFunc <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(*Context)</span></span><br></code></pre></td></tr></table></figure>

<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404905.png" srcset="/img/loading.gif" lazyload alt="image-20230405192050123"></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	r := gin.Default()<br>	r.LoadHTMLGlob(<span class="hljs-string">&quot;templates/**/*&quot;</span>)<br>	r.Static(<span class="hljs-string">&quot;/s&quot;</span>, <span class="hljs-string">&quot;/static&quot;</span>)<br>	<span class="hljs-comment">// 使用中间件</span><br>	r.Use(middleware.OneMiddle)<br>	r.Use(middleware.TwoMiddle())<br>	router.Router(r)<br>	r.Run()<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h3><ul>
<li>全局中间件：在<code>main</code>函数中对整个<code>gin</code>引擎的中间件<code>*gin.Engine</code>设置 -&gt; Use()</li>
<li>路由组中间件：对某个路由分组<code>*RouterGroup</code>的中间件设置 -&gt; Use()</li>
<li>局部中间件：对某个路由的中间件设置 -&gt; 将中间件放到路由和函数之间（ 参数 ）</li>
</ul>
<h4 id="全局中间件"><a href="#全局中间件" class="headerlink" title="全局中间件"></a>全局中间件</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	r := gin.Default()<br>	r.LoadHTMLGlob(<span class="hljs-string">&quot;templates/**/*&quot;</span>)<br>	r.Static(<span class="hljs-string">&quot;/s&quot;</span>, <span class="hljs-string">&quot;/static&quot;</span>)<br>	<span class="hljs-comment">// 使用中间件</span><br>	r.Use(middleware.OneMiddle)<br>	r.Use(middleware.TwoMiddle())<br>	router.Router(r)<br>	r.Run()<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="路由组中间件"><a href="#路由组中间件" class="headerlink" title="路由组中间件"></a>路由组中间件</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Router</span><span class="hljs-params">(r *gin.Engine)</span></span> &#123;<br>	<span class="hljs-comment">// 定义分组</span><br>	g := r.Group(<span class="hljs-string">&quot;/general&quot;</span>)<br>	m := r.Group(<span class="hljs-string">&quot;/member&quot;</span>)<br>	<span class="hljs-comment">// 为路由组设置中间件</span><br>	g.Use(middleware.OneMiddle)   <span class="hljs-comment">// general 组使用 OneMiddle 中间件</span><br>	m.Use(middleware.TwoMiddle()) <span class="hljs-comment">// member 组使用 TwoMiddle中间件</span><br>	<span class="hljs-comment">// 将组传递给对应模块路由</span><br>	general.Router(g)<br>	member.Router(m)<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="局部中间件"><a href="#局部中间件" class="headerlink" title="局部中间件"></a>局部中间件</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go">r.GET(<span class="hljs-string">&quot;/&quot;</span>, middleware.OneMiddle, index)<br></code></pre></td></tr></table></figure>

<h3 id="中间件链"><a href="#中间件链" class="headerlink" title="中间件链"></a>中间件链</h3><h4 id="介绍-2"><a href="#介绍-2" class="headerlink" title="介绍"></a>介绍</h4><p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404360.png" srcset="/img/loading.gif" lazyload alt="image-20230405194001773"></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404450.png" srcset="/img/loading.gif" lazyload alt="image-20230405194019667"></p>
<p>如果定义众多中间件，会形成一条中间件链，中间件之间的执行顺序就是main中写的顺序：</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404540.png" srcset="/img/loading.gif" lazyload alt="image-20230405194324172"></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404721.png" srcset="/img/loading.gif" lazyload alt="image-20230405194143214"></p>
<p>执行 -&gt; 一个钩子函数走完，再走下一个</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404028.png" srcset="/img/loading.gif" lazyload alt="image-20230405194645949"></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404442.png" srcset="/img/loading.gif" lazyload alt="image-20230405194701949"></p>
<h4 id="Next"><a href="#Next" class="headerlink" title="Next"></a>Next</h4><p><code>Next()</code> ：继续走中间件链中的下一个中间件</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404254.png" srcset="/img/loading.gif" lazyload alt="image-20230405195035734"></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404394.png" srcset="/img/loading.gif" lazyload alt="image-20230405194753356"></p>
<h4 id="终止链条"><a href="#终止链条" class="headerlink" title="终止链条"></a>终止链条</h4><p><code>Abort()</code>：终止掉链条，但是还是会执行完本中间件。</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404062.png" srcset="/img/loading.gif" lazyload alt="image-20230405195423253"></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051404523.png" srcset="/img/loading.gif" lazyload alt="image-20230405195321783"></p>
<h3 id="BasicAuth中间件"><a href="#BasicAuth中间件" class="headerlink" title="BasicAuth中间件"></a>BasicAuth中间件</h3><p>Basic Authentication是一种HTTP访问控制方式，用于限制对网站资源的访问。</p>
<p>这种方式不需要Cookie和Session，只需要客户端发起请求的时候，在头部Header中提交用户名和密码就可以。</p>
<p>如果没有附加，会弹出一个对话框，要求输入用户名和密码。这种方式实施起来非常简单，适合路由器之类小型系统。</p>
<p>但是它不提供信息加密措施，通常都是以明文或者base64编码传输。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	r := gin.Default()<br>	authorized := r.Group(<span class="hljs-string">&quot;/admin&quot;</span>, gin.BasicAuth(gin.Accounts&#123;<br>		<span class="hljs-string">&quot;admin&quot;</span>: <span class="hljs-string">&quot;123456&quot;</span>,<br>		<span class="hljs-string">&quot;root&quot;</span>:  <span class="hljs-string">&quot;root123&quot;</span>,<br>	&#125;))<br>	authorized.GET(<span class="hljs-string">&quot;/login&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>		user := context.MustGet(gin.AuthUserKey).(<span class="hljs-type">string</span>)<br>		context.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;欢迎 %s 管理员来到后台 !&quot;</span>, user)<br>	&#125;)<br>	r.Run()<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405500.png" srcset="/img/loading.gif" lazyload alt="image-20230405230500993"></p>
<p>账号密码正确之后，即可访问</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405225.png" srcset="/img/loading.gif" lazyload alt="image-20230405230530446"></p>
<p>请求头中多了一个 <code>Authorization</code>：</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405073.png" srcset="/img/loading.gif" lazyload alt="image-20230405230617817"></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">BasicAuth</span><span class="hljs-params">(accounts Accounts)</span></span> HandlerFunc<br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405105.png" srcset="/img/loading.gif" lazyload alt="image-20230405225937272"></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> Accounts <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span><br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405400.png" srcset="/img/loading.gif" lazyload alt="image-20230405230124130"></p>
<h3 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h3><p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405412.png" srcset="/img/loading.gif" lazyload alt="image-20230407095148420"></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405172.png" srcset="/img/loading.gif" lazyload alt="image-20230407095201011"></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">testCookie</span><span class="hljs-params">(context *gin.Context)</span></span> &#123;<br>	cookie, err := context.Cookie(<span class="hljs-string">&quot;userName&quot;</span>)<br>	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>		cookie = <span class="hljs-string">&quot;fuyoumingyan&quot;</span><br>		context.SetCookie(<span class="hljs-string">&quot;userName&quot;</span>, cookie, <span class="hljs-number">60</span>*<span class="hljs-number">60</span>, <span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-string">&quot;43.139.185.135&quot;</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>)<br>	&#125;<br>	context.String(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;testCookie&quot;</span>)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	r := gin.Default()<br>	r.GET(<span class="hljs-string">&quot;/cookie&quot;</span>, testCookie)<br>	r.Run()<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405502.png" srcset="/img/loading.gif" lazyload alt="image-20230407095220333"></p>
<h3 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h3><p>Gin 中没有集成Session功能，通过第三方的中间件来实现。</p>
<p><a target="_blank" rel="noopener" href="https://pkg.go.dev/">https://pkg.go.dev</a> -&gt; gin session</p>
<p><a target="_blank" rel="noopener" href="https://pkg.go.dev/github.com/gin-contrib/sessions#section-readme">https://pkg.go.dev/github.com/gin-contrib/sessions#section-readme</a></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405568.png" srcset="/img/loading.gif" lazyload alt="image-20230407095843919"></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>	<span class="hljs-string">&quot;github.com/gin-contrib/sessions&quot;</span><br>	<span class="hljs-string">&quot;github.com/gin-contrib/sessions/cookie&quot;</span><br>	<span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	r := gin.Default()<br>	store := cookie.NewStore([]<span class="hljs-type">byte</span>(<span class="hljs-string">&quot;secret&quot;</span>))<br>	r.Use(sessions.Sessions(<span class="hljs-string">&quot;mysession&quot;</span>, store))<br>	r.GET(<span class="hljs-string">&quot;/hello&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>		session := sessions.Default(c)<br>		<span class="hljs-keyword">if</span> session.Get(<span class="hljs-string">&quot;hello&quot;</span>) != <span class="hljs-string">&quot;world&quot;</span> &#123;<br>			session.Set(<span class="hljs-string">&quot;hello&quot;</span>, <span class="hljs-string">&quot;world&quot;</span>)<br>			session.Save()<br>		&#125;<br>		c.JSON(<span class="hljs-number">200</span>, gin.H&#123;<span class="hljs-string">&quot;hello&quot;</span>: session.Get(<span class="hljs-string">&quot;hello&quot;</span>)&#125;)<br>	&#125;)<br>	r.Run()<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h2 id="GORM"><a href="#GORM" class="headerlink" title="GORM"></a>GORM</h2><p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405669.png" srcset="/img/loading.gif" lazyload alt="image-20230407104857197"></p>
<p><code>ginStudy/dbope/mysql_connect.go</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> dbope<br><br><span class="hljs-keyword">import</span> (<br>	<span class="hljs-string">&quot;github.com/jinzhu/gorm&quot;</span><br>	_ <span class="hljs-string">&quot;github.com/jinzhu/gorm/dialects/mysql&quot;</span> <span class="hljs-comment">// 导入mysql的dialect,没有使用所以加 _</span><br>)<br><br><span class="hljs-comment">// 别的地方需要使用DB</span><br><span class="hljs-keyword">var</span> DB *gorm.DB<br><span class="hljs-keyword">var</span> err <span class="hljs-type">error</span><br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span> &#123;<br>	<span class="hljs-comment">// 数据库连接</span><br>	DB, err = gorm.Open(<span class="hljs-string">&quot;mysql&quot;</span>, <span class="hljs-string">&quot;gorm:3xrEmSCC3j68Yr57@tcp(43.139.185.135:3306)/gorm?charset=utf8&amp;parseTime=True&amp;loc=Local&quot;</span>)<br>	<span class="hljs-comment">// 错误处理</span><br>	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>		<span class="hljs-built_in">panic</span>(err)<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>ginStudy/main.go</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br>	<span class="hljs-string">&quot;awesomeProject/ginStudy/dbope&quot;</span>		<span class="hljs-comment">// 引入数据库连接部分</span><br>	<span class="hljs-string">&quot;awesomeProject/ginStudy/router&quot;</span><br>	<span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>	<span class="hljs-comment">// 释放资源</span><br>	<span class="hljs-keyword">defer</span> dbope.DB.Close()<br>	r := gin.Default()<br>	<span class="hljs-comment">// 加载总路由</span><br>	router.Router(r)<br>	r.Run()<br>&#125;<br></code></pre></td></tr></table></figure>

<p>总路由：</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405050.png" srcset="/img/loading.gif" lazyload alt="image-20230407105133052"></p>
<p>学生组路由：</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405085.png" srcset="/img/loading.gif" lazyload alt="image-20230407105206168"></p>
<p>学生表操作函数：</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405843.png" srcset="/img/loading.gif" lazyload alt="image-20230407105236541"></p>
<p>请求：<a target="_blank" rel="noopener" href="http://43.139.185.135:8080/student/registered">http://43.139.185.135:8080/student/registered</a></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405934.png" srcset="/img/loading.gif" lazyload alt="image-20230407105304477"></p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405295.png" srcset="/img/loading.gif" lazyload alt="image-20230407105350462"></p>
<h2 id="原理分析"><a href="#原理分析" class="headerlink" title="原理分析"></a>原理分析</h2><ul>
<li>路由设计 httprouter 实现 路由模块。 routerGroup 的 Handlers 存储了所有中间件</li>
<li>高性能的 Trees 基于 Radix Tree 基数树 key 就是 URL 的字符串 ，value 对应的 []HandlerFunc</li>
</ul>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405685.png" srcset="/img/loading.gif" lazyload alt="image-20230407122409431"></p>
<h2 id="源码分析"><a href="#源码分析" class="headerlink" title="源码分析"></a>源码分析</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Default</span><span class="hljs-params">()</span></span> *Engine &#123;<br>	debugPrintWARNINGDefault()<br>    <span class="hljs-comment">// New()一个Engine</span><br>	engine := New()<br>    <span class="hljs-comment">// 使用Logger(), Recovery()中间件</span><br>	engine.Use(Logger(), Recovery())<br>	<span class="hljs-keyword">return</span> engine<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">New</span><span class="hljs-params">()</span></span> *Engine &#123;<br>	debugPrintWARNINGNew()<br>	engine := &amp;Engine&#123;<br>        <span class="hljs-comment">// 路由组，其中Handlers为中间件 数据</span><br>		RouterGroup: RouterGroup&#123;<br>			Handlers: <span class="hljs-literal">nil</span>,<br>			basePath: <span class="hljs-string">&quot;/&quot;</span>,<br>			root:     <span class="hljs-literal">true</span>,<br>		&#125;,<br>		FuncMap:                template.FuncMap&#123;&#125;,<br>		RedirectTrailingSlash:  <span class="hljs-literal">true</span>,<br>		RedirectFixedPath:      <span class="hljs-literal">false</span>,<br>		HandleMethodNotAllowed: <span class="hljs-literal">false</span>,<br>		ForwardedByClientIP:    <span class="hljs-literal">true</span>,<br>		RemoteIPHeaders:        []<span class="hljs-type">string</span>&#123;<span class="hljs-string">&quot;X-Forwarded-For&quot;</span>, <span class="hljs-string">&quot;X-Real-IP&quot;</span>&#125;,<br>		TrustedPlatform:        defaultPlatform,<br>		UseRawPath:             <span class="hljs-literal">false</span>,<br>		RemoveExtraSlash:       <span class="hljs-literal">false</span>,<br>		UnescapePathValues:     <span class="hljs-literal">true</span>,<br>		MaxMultipartMemory:     defaultMultipartMemory,<br>        <span class="hljs-comment">// 方法树</span><br>        <span class="hljs-comment">// trees 负责存储路由和handle方法的映射，采用类似字典树的结构</span><br>        <span class="hljs-comment">// gin的高性能主要依靠trees</span><br>		trees:                  <span class="hljs-built_in">make</span>(methodTrees, <span class="hljs-number">0</span>, <span class="hljs-number">9</span>),<br>		delims:                 render.Delims&#123;Left: <span class="hljs-string">&quot;&#123;&#123;&quot;</span>, Right: <span class="hljs-string">&quot;&#125;&#125;&quot;</span>&#125;,<br>		secureJSONPrefix:       <span class="hljs-string">&quot;while(1);&quot;</span>,<br>		trustedProxies:         []<span class="hljs-type">string</span>&#123;<span class="hljs-string">&quot;0.0.0.0/0&quot;</span>, <span class="hljs-string">&quot;::/0&quot;</span>&#125;,<br>		trustedCIDRs:           defaultTrustedCIDRs,<br>	&#125;<br>	engine.RouterGroup.engine = engine<br>    <span class="hljs-comment">// 这里采用 sync/pool 实现context池,减少频繁context实例化带来的资源消耗</span><br>	engine.pool.New = <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> any &#123;<br>		<span class="hljs-keyword">return</span> engine.allocateContext(engine.maxParams)<br>	&#125;<br>	<span class="hljs-keyword">return</span> engine<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// RouterGroup is used internally to configure router, a RouterGroup is associated with</span><br><span class="hljs-comment">// a prefix and an array of handlers (middleware).</span><br><span class="hljs-keyword">type</span> RouterGroup <span class="hljs-keyword">struct</span> &#123;<br>	Handlers HandlersChain	<span class="hljs-comment">// HandlersChain -&gt; []HandlerFunc -&gt; func(*Context)</span><br>	basePath <span class="hljs-type">string</span><br>	engine   *Engine	<span class="hljs-comment">// 引擎</span><br>	root     <span class="hljs-type">bool</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>Context 上下文：</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405423.png" srcset="/img/loading.gif" lazyload alt="image-20230407124816118"></p>
<p>Engine 引擎：</p>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405550.png" srcset="/img/loading.gif" lazyload alt="image-20230407124719872"></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> Engine <span class="hljs-keyword">struct</span> &#123;<br>    <span class="hljs-comment">// 路由组</span><br>	RouterGroup<br>	<span class="hljs-comment">// .....</span><br>    <span class="hljs-comment">// 重定向固定路径</span><br>	RedirectFixedPath <span class="hljs-type">bool</span><br>    <span class="hljs-comment">// 方法数</span><br>	trees            methodTrees<br>&#125;<br><br></code></pre></td></tr></table></figure>

<blockquote>
<p>methodTrees</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> methodTrees []methodTree<br></code></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> methodTree <span class="hljs-keyword">struct</span> &#123;<br>    <span class="hljs-comment">// 方法</span><br>	method <span class="hljs-type">string</span><br>    <span class="hljs-comment">// 里面存储的就是按顺序执行的中间件和handle控制器方法（[]HandlerFunc）</span><br>	root   *node<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> node <span class="hljs-keyword">struct</span> &#123;<br>    <span class="hljs-comment">// 保存这个节点上的URL路径</span><br>    <span class="hljs-comment">// 例如所画流程图中的shen和sheng, 共同的parent节点的path=&quot;s&quot; &quot;h&quot; &quot;e&quot;</span><br>    <span class="hljs-comment">// 后面两个节点的path分别是&quot;n&quot;和&quot;ng&quot;</span><br>	path      <span class="hljs-type">string</span><br>    <span class="hljs-comment">// 和children[]对应, 保存的是分裂的分支的第一个字符</span><br>    <span class="hljs-comment">// 例如search和support, 那么s节点的indices对应的&quot;eu&quot;</span><br>    <span class="hljs-comment">// 代表有两个分支, 分支的首字母分别是e和u</span><br>	indices   <span class="hljs-type">string</span><br>    <span class="hljs-comment">// 判断当前节点路径是不是参数节点, 例如上图的:post部分就是wildChild节点</span><br>	wildChild <span class="hljs-type">bool</span><br>    <span class="hljs-comment">// 节点类型包括static, root, param, catchAll</span><br>    <span class="hljs-comment">// static: 静态节点, 例如上面分裂出来作为parent的s</span><br>    <span class="hljs-comment">// root: 如果插入的节点是第一个, 那么是root节点</span><br>    <span class="hljs-comment">// catchAll: 有*匹配的节点</span><br>    <span class="hljs-comment">// param: 除上面外的节点</span><br>	nType     nodeType<br>	priority  <span class="hljs-type">uint32</span><br>    <span class="hljs-comment">// 保存孩子节点</span><br>	children  []*node <span class="hljs-comment">// child nodes, at most 1 :param style node at the end of the array</span><br>    <span class="hljs-comment">// 当前节点的处理函数</span><br>    <span class="hljs-comment">// []HandlerFunc</span><br>	handlers  HandlersChain<br>	fullPath  <span class="hljs-type">string</span><br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<blockquote>
<p>*Engine.Group</p>
</blockquote>
<p><img src="https://gallery-1310215391.cos.ap-beijing.myqcloud.com/img/202309051405249.png" srcset="/img/loading.gif" lazyload alt="image-20230407125926152"></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(group *RouterGroup)</span></span> Group(relativePath <span class="hljs-type">string</span>, handlers ...HandlerFunc) *RouterGroup &#123;<br>	<span class="hljs-keyword">return</span> &amp;RouterGroup&#123;<br>        <span class="hljs-comment">// cope一份全局中间件到新生成的RouterGroup.Handlers中,</span><br>		<span class="hljs-comment">// 接下来路由注册的时候就可以一起写入树节点中</span><br>		Handlers: group.combineHandlers(handlers),<br>		basePath: group.calculateAbsolutePath(relativePath),<br>		engine:   group.engine,<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(group *RouterGroup)</span></span> combineHandlers(handlers HandlersChain) HandlersChain &#123;<br>	finalSize := <span class="hljs-built_in">len</span>(group.Handlers) + <span class="hljs-built_in">len</span>(handlers)<br>	assert1(finalSize &lt; <span class="hljs-type">int</span>(abortIndex), <span class="hljs-string">&quot;too many handlers&quot;</span>)<br>	mergedHandlers := <span class="hljs-built_in">make</span>(HandlersChain, finalSize)<br>    <span class="hljs-comment">// group.Handlers copy 高于自定义 handlers</span><br>	<span class="hljs-built_in">copy</span>(mergedHandlers, group.Handlers)<br>	<span class="hljs-built_in">copy</span>(mergedHandlers[<span class="hljs-built_in">len</span>(group.Handlers):], handlers)<br>	<span class="hljs-keyword">return</span> mergedHandlers<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(group *RouterGroup)</span></span> GET(relativePath <span class="hljs-type">string</span>, handlers ...HandlerFunc) IRoutes &#123;<br>	<span class="hljs-keyword">return</span> group.handle(http.MethodGet, relativePath, handlers)<br>&#125;<br></code></pre></td></tr></table></figure>




                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Golang/" class="category-chain-item">Golang</a>
  
  
    <span>></span>
    
  <a href="/categories/Golang/WEB%E5%BC%80%E5%8F%91/" class="category-chain-item">WEB开发</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Golang/">#Golang</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Go Gin 框架</div>
      <div>https://fuyoumingyan.github.io/2023/08/13/WEB开发/Gin框架/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>fuming</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年8月13日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/08/13/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E6%B8%97%E9%80%8F%E5%9F%BA%E7%A1%80/" title="渗透基础">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">渗透基础</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/08/13/%E5%AE%89%E5%85%A8%E5%B7%A5%E5%85%B7/CobaltStrike/" title="Cobalt Strike">
                        <span class="hidden-mobile">Cobalt Strike</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
